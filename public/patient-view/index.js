!function(){"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function n(e,n){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,n){if(e){if("string"==typeof e)return t(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){a&&(e=a);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,c=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return c=e.done,e},e:function(e){o=!0,s=e},f:function(){try{c||null==a.return||a.return()}finally{if(o)throw s}}}}var a=function(e){var t=new URLSearchParams(window.location.search),n=t.get("sid")?t.get("sid"):"",a=-1==e.indexOf("?")?"?sid="+n:"&sid="+n;return e+a},i=function(){var e=new URLSearchParams(window.location.search);return e.get("sid")?e.get("sid"):""},r=function(){var e=new URLSearchParams(window.location.search);return e.get("id")?e.get("id"):""},s=function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),a=0;a<n.length;a++){for(var i=n[a];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""},c=function(e){e.code,alert(e.reason)},o=function(e){var t=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});e.dispatchEvent(t)},l=function(e,t){if(document.querySelector(e)){var a,i=n(document.querySelectorAll(e));try{for(i.s();!(a=i.n()).done;){var r=a.value;r.removeEventListener("click",t,!0),r.addEventListener("click",t,!0)}}catch(e){i.e(e)}finally{i.f()}}},d=function(e,t){if(document.querySelector(e)){var a,i=n(document.querySelectorAll(e));try{for(i.s();!(a=i.n()).done;){var r=a.value;r.removeEventListener("change",t,!0),r.addEventListener("change",t,!0)}}catch(e){i.e(e)}finally{i.f()}}},p=function(t,n){var a;t=String(t),n=Object(n);var i={delimiter:"-",limit:void 0,lowercase:!0,replacements:{},transliterate:"undefined"==typeof XRegExp};for(var r in i)n.hasOwnProperty(r)||(n[r]=i[r]);var s=(e(a={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Å":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Å°":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","Å":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","Å±":"u","ý":"y","þ":"th","ÿ":"y","©":"(c)","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Î":"A","Î":"E","Î":"I","Î":"O","Î":"Y","Î":"H","Î":"W","Îª":"I","Î«":"Y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","Î¬":"a","Î­":"e","Î¯":"i","Ï":"o","Ï":"y","Î®":"h","Ï":"w","ς":"s","Ï":"i","Î°":"y","Ï":"y","Î":"i","Å":"S","Ä°":"I"},"Ç","C"),e(a,"Ü","U"),e(a,"Ö","O"),e(a,"Ä","G"),e(a,"Å","s"),e(a,"Ä±","i"),e(a,"ç","c"),e(a,"ü","u"),e(a,"ö","o"),e(a,"Ä","g"),e(a,"Ð","A"),e(a,"Ð","B"),e(a,"Ð","V"),e(a,"Ð","G"),e(a,"Ð","D"),e(a,"Ð","E"),e(a,"Ð","Yo"),e(a,"Ð","Zh"),e(a,"Ð","Z"),e(a,"Ð","I"),e(a,"Ð","J"),e(a,"Ð","K"),e(a,"Ð","L"),e(a,"Ð","M"),e(a,"Ð","N"),e(a,"Ð","O"),e(a,"Ð","P"),e(a,"Ð ","R"),e(a,"Ð¡","S"),e(a,"Ð¢","T"),e(a,"Ð£","U"),e(a,"Ð¤","F"),e(a,"Ð¥","H"),e(a,"Ð¦","C"),e(a,"Ð§","Ch"),e(a,"Ð¨","Sh"),e(a,"Ð©","Sh"),e(a,"Ðª",""),e(a,"Ð«","Y"),e(a,"Ð¬",""),e(a,"Ð­","E"),e(a,"Ð®","Yu"),e(a,"Ð¯","Ya"),e(a,"Ð°","a"),e(a,"Ð±","b"),e(a,"Ð²","v"),e(a,"Ð³","g"),e(a,"Ð´","d"),e(a,"Ðµ","e"),e(a,"Ñ","yo"),e(a,"Ð¶","zh"),e(a,"Ð·","z"),e(a,"Ð¸","i"),e(a,"Ð¹","j"),e(a,"Ðº","k"),e(a,"Ð»","l"),e(a,"Ð¼","m"),e(a,"Ð½","n"),e(a,"Ð¾","o"),e(a,"Ð¿","p"),e(a,"Ñ","r"),e(a,"Ñ","s"),e(a,"Ñ","t"),e(a,"Ñ","u"),e(a,"Ñ","f"),e(a,"Ñ","h"),e(a,"Ñ","c"),e(a,"Ñ","ch"),e(a,"Ñ","sh"),e(a,"Ñ","sh"),e(a,"Ñ",""),e(a,"Ñ","y"),e(a,"Ñ",""),e(a,"Ñ","e"),e(a,"Ñ","yu"),e(a,"Ñ","ya"),e(a,"Ð","Ye"),e(a,"Ð","I"),e(a,"Ð","Yi"),e(a,"Ò","G"),e(a,"Ñ","ye"),e(a,"Ñ","i"),e(a,"Ñ","yi"),e(a,"Ò","g"),e(a,"Ä","C"),e(a,"Ä","D"),e(a,"Ä","E"),e(a,"Å","N"),e(a,"Å","R"),e(a,"Š","S"),e(a,"Å¤","T"),e(a,"Å®","U"),e(a,"Å½","Z"),e(a,"Ä","c"),e(a,"Ä","d"),e(a,"Ä","e"),e(a,"Å","n"),e(a,"Å","r"),e(a,"š","s"),e(a,"Å¥","t"),e(a,"Å¯","u"),e(a,"Å¾","z"),e(a,"Ä","A"),e(a,"Ä","C"),e(a,"Ä","e"),e(a,"Å","L"),e(a,"Å","N"),e(a,"Ó","o"),e(a,"Å","S"),e(a,"Å¹","Z"),e(a,"Å»","Z"),e(a,"Ä","a"),e(a,"Ä","c"),e(a,"Ä","e"),e(a,"Å","l"),e(a,"Å","n"),e(a,"ó","o"),e(a,"Å","s"),e(a,"Åº","z"),e(a,"Å¼","z"),e(a,"Ä","A"),e(a,"Ä","C"),e(a,"Ä","E"),e(a,"Ä¢","G"),e(a,"Äª","i"),e(a,"Ä¶","k"),e(a,"Ä»","L"),e(a,"Å","N"),e(a,"Š","S"),e(a,"Åª","u"),e(a,"Å½","Z"),e(a,"Ä","a"),e(a,"Ä","c"),e(a,"Ä","e"),e(a,"Ä£","g"),e(a,"Ä«","i"),e(a,"Ä·","k"),e(a,"Ä¼","l"),e(a,"Å","n"),e(a,"š","s"),e(a,"Å«","u"),e(a,"Å¾","z"),a);for(var r in n.replacements)t=t.replace(RegExp(r,"g"),n.replacements[r]);if(n.transliterate)for(var r in s)t=t.replace(RegExp(r,"g"),s[r]);var c="undefined"==typeof XRegExp?RegExp("[^a-z0-9]+","ig"):XRegExp("[^\\p{L}\\p{N}]+","ig");return t=(t=(t=(t=t.replace(c,n.delimiter)).replace(RegExp("["+n.delimiter+"]{2,}","g"),n.delimiter)).substring(0,n.limit)).replace(RegExp("(^"+n.delimiter+"|"+n.delimiter+"$)","g"),""),n.lowercase?t.toLowerCase():t},u=function(){var e=document.querySelector(".loader");e&&(e.style.display="block")},m=function(){var e=document.querySelector(".loader");e&&(e.style.display="none")},v=function(e){if(!e)throw new Error("DOM Element is undifined! Please choose HTML target element.");var t,n,a,i,r,s,c=e;function o(){t.innerHTML="",i.forEach((function(e,n){if(e){var a=document.createElement("li");a.innerHTML="".concat(e," <a>&times;</a>"),a.querySelector("a").addEventListener("click",(function(){var e;e=n,i=i.filter((function(t,n){return n!==e&&t})),o()})),t.appendChild(a)}})),c.setAttribute("data-simple-tags",i.toString())}a=(a=c.getAttribute("data-simple-tags")).split(","),i=a.map((function(e){return e.trim()})),r=document.createElement("ul"),(s=document.createElement("input")).setAttribute("placeholder","new entry"),c.appendChild(r),c.appendChild(s),t=c.firstElementChild,n=c.lastElementChild,o(),n.addEventListener("keyup",(function(e){var t=this.value.trim();(t.includes(",")||13===e.keyCode)&&(""!==t.replace(",","")&&i.push(t.replace(",","")),this.value=""),o()}))},f={state:{locale:null},init:function(e){f.state.locale=e},__:function(e){return void 0===f.state.locale.values[e]?e:f.state.locale.values[e]}},h=f.__,g="https://kenzap-sites.oss-ap-southeast-1.aliyuncs.com",b={init:function(){b.getData()},state:{firstLoad:!0,response:{},modalCont:null,ajaxQueue:0,record_limit:20,symptoms:{warning:["diarrhoea"],danger:["hypertension","hypertension-stage-1","hypertension-stage-2"]},prescriptions:[],tabAnalytics:!1},getData:function(){u();var e=r();i(),fetch("https://api-v1.kenzap.cloud/",{method:"post",headers:{Accept:"application/json","Content-Type":"text/plain",Authorization:"Bearer "+s("kenzap_api_key"),"Kenzap-Token":s("kenzap_token"),"Kenzap-Sid":i()},body:JSON.stringify({query:{user:{type:"authenticate",fields:["avatar"],token:s("kenzap_token")},patient:{type:"find",key:"ic-patient",id:e,fields:"*"},records:{type:"find",key:"ic-record",fields:"*",limit:b.state.record_limit,search:{field:"patient_id",s:e}},settings:{type:"get",key:"ic-settings",fields:"*"},locale:{type:"locale",id:"en"}}})}).then((function(e){return e.json()})).then((function(e){if(m(),e.success){if(f.init(e.locale),document.querySelector("#contents").innerHTML=function(e){return'\n  <div class="container p-edit">\n    <div class="d-flex justify-content-between bd-highlight mb-3">\n        <nav class="bc" aria-label="breadcrumb"></nav>\n        <button class="btn btn-primary btn-add" type="button">'.concat(e("Add record"),'</button>\n    </div>\n    <div class="row">\n        <div class="col-lg-9 grid-margin grid-margin-lg-0 grid-margin-md-0 stretch-card">\n            <div class="sections" id="sections" role="tablist" style="width:100%;">\n\n                <div class="row">\n                    <div class="col-12 grid-margin stretch-card">\n                        <div class="alert alert-danger d-flex align-items-center" role="alert">\n                            <svg class="bi flex-shrink-0 me-2" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">\n                                <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"></path>\n                            </svg>\n                            <div id="latest-alert">\n                                Please check "Recent records" tab for more details\n                            </div>\n                        </div>\n                        \n                        <div class="card border-white shadow-sm p-sm-3">\n\n                            <div class="card-body" style="max-width: 540px;">\n                                <div class="row g-0">\n                                    <div class="col-md-3">\n                                        <img src="https://account.kenzap.com/images/default_avatar.jpg" style="max-height:100px;" class="img-fluid rounded-circle" alt="Patient avatar">\n                                    </div>\n                                    <div class="col-md-8">\n                                        <div class="">\n                                            <h3 id="p-name" class="card-title mt-3"></h3>\n                                            <p id="p-bio" class="card-text text-muted"</p>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <nav class="card-body nav tab-content mt-1 mb-1" role="tablist">\n                                <div class="nav nav-tabs" id="nav-tab" role="tablist"> \n                                    <a class="nav-link active" id="nav-tab-3-link" data-bs-toggle="tab" data-bs-target="#nav-tab-3" type="button" role="tab" aria-controls="nav-tab-3" aria-selected="true"  href="#">').concat(e("Recent records"),'</a>\n                                    <a class="nav-link" id="nav-tab-1-link" data-bs-toggle="tab" data-bs-target="#nav-tab-1" type="button" role="tab" aria-controls="nav-tab-1" aria-selected="true" href="#">').concat(e("General info"),'</a>\n                                    <a class="nav-link" id="nav-tab-2-link" data-bs-toggle="tab" data-bs-target="#nav-tab-2" type="button" role="tab" aria-controls="nav-tab-2" aria-selected="true" href="#">').concat(e("Analytics"),'</a>\n                                    <a class="nav-link" id="nav-tab-4-link" data-bs-toggle="tab" data-bs-target="#nav-tab-4" type="button" role="tab" aria-controls="nav-tab-4" aria-selected="true" href="#">').concat(e("Prescriptions"),'</a>\n                                </div>\n                            </nav>\n                            \n                            <div class="card-body tab-content" id="nav-tabContent">\n                                <div class="tab-pane fade show active" id="nav-tab-3" role="tabpanel" aria-labelledby="nav-tab-3-link">\n\n                                    <div class="card-body">\n                                        <div class="mb-4">\n                                            <h4>').concat(e("Recent records"),'</h4>\n                                            <ul class="timeline">\n                                                <li class="clearfix">\n                                                    <a target="_blank" href="https://www.totoprayogo.com/#">New Web Design</a>\n                                                    <p class="mb-1">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque scelerisque diam non nisi semper, et elementum lorem ornare. Maecenas placerat facilisis mollis. Duis sagittis ligula in sodales vehicula....</p>\n                                                    <span class="float-end form-text text-muted">21 March, 2014</span>\n                                                </li>\n                                                <li class="clearfix">\n                                                    <a href="#">21 000 Job Seekers</a>\n                                                    <p class="mb-1">Curabitur purus sem, malesuada eu luctus eget, suscipit sed turpis. Nam pellentesque felis vitae justo accumsan, sed semper nisi sollicitudin...</p>\n                                                    <span class="float-end form-text text-muted">4 March, 2014</span>\n                                                </li>\n                                                <li class="clearfix">\n                                                    <a href="#">Awesome Employers</a>\n                                                    <p class="mb-1">Fusce ullamcorper ligula sit amet quam accumsan aliquet. Sed nulla odio, tincidunt vitae nunc vitae, mollis pharetra velit. Sed nec tempor nibh...</p>\n                                                    <span class="float-end form-text text-muted">1 April, 2014</span>\n                                                </li>\n                                            </ul>\n                                        </div>\n                                    </div>\n\n                                </div>\n                                <div class="tab-pane fade" id="nav-tab-1" role="tabpanel" aria-labelledby="nav-tab-1-link">\n                                    <div id="card-view" class="card-body">\n                                        <div id="placeholders" class="d-none">\n                                            <h4 id="elan" class="card-title mb-4">').concat(e("Description"),'</h4>\n                                            <div class="mb-3">\n                                                <label class="banner-name-l form-label" for="p-title">').concat(e("Full Name"),'</label>\n                                                <input type="text" class="form-control inp" id="p-title"\n                                                    placeholder="').concat(e("Sushi set.."),'">\n                                                <p class="form-text"> </p>\n                                            </div>\n\n                                            <div class="mb-3">\n                                                <label class="banner-descshort-l form-label" for="p-sdesc">').concat(e("Short Description"),'</label>\n                                                <textarea class="form-control inp" id="p-sdesc" placeholder="  " maxlength="120" rows="2"></textarea>\n                                            </div>\n\n                                            <div class="mb-3">\n                                                <label class="banner-descshort-l form-label" for="desc">').concat(e("Images"),'</label>\n                                                <div class="clearfix"></div>\n                                                <div class="ic"></div>\n                                                <div class="clearfix"></div>\n                                            </div>\n\n                                            <div class="mb-3">\n                                                <div class="clearfix"></div>\n                                                <div style="clear:both;margin-top:16px;"></div>\n                                                <label class="banner-descshort-l form-label" for="p-desc">').concat(e("Description"),'</label>\n                                                <textarea class="form-control inp" id="p-ldesc" placeholder=" " maxlength="2000" rows="10"></textarea>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="tab-pane fade" id="nav-tab-2" role="tabpanel" aria-labelledby="nav-tab-2-link">\n                                    <div class="card-body">\n                                        <div class="mb-4">\n                                            <div class="d-flex justify-content-between">\n                                                <h4 class="mb-0">').concat(e("Analytics"),'</h4>\n                                                <div class="ms-2 dropdown">\n                                                    <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">\n                                                    Blood pressure\n                                                    </button>\n                                                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1" style="">\n                                                        <li><a class="dropdown-item" href="#">Heart rate</a></li>\n                                                        <li><a class="dropdown-item" href="#">Anomaly frequency</a></li>\n                                                        <li><a class="dropdown-item" href="#">Body temperature</a></li>\n                                                    </ul>\n                                                </div>\n                                            </div>\n                                            <div id="chart" style="width: 100%; height: 400px"></div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="tab-pane fade" id="nav-tab-3" role="tabpanel" aria-labelledby="nav-tab-3-link">\n        \n                                </div>\n                                <div class="tab-pane fade" id="nav-tab-4" role="tabpanel" aria-labelledby="nav-tab-4-link">\n                                    <div class="card-body">\n                                        <div class="mb-4">\n                                            <h4>').concat(e("Active Prescriptions"),'</h4>\n                                            <div class="prescriptions">\n\n                                            \n\n                                            </div>\n                                            <button class="btn btn-outline-primary add-prescription float-end mt-3" type="button">').concat(e("Manage prescriptions"),'</button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n\n            </div>\n        </div>\n        <div class="col-lg-3 grid-margin grid-margin-lg-0 grid-margin-md-0">\n\n            <div class="row">\n                <div class="col-12 grid-margin stretch-card">\n                    <div class="card border-white shadow-sm p-sm-3">\n                        <div class="card-body">\n\n                            <h4 class="card-title" style="display:none;">').concat(e("General"),'</h4>\n                            <div class="landing_status"></div>\n                            <input type="hidden" class="form-control" id="landing-slug" value="">\n\n                            <h4 id="elan" class="card-title mb-4">').concat(e("Patient status"),'</h4>\n                            <div id="status-cont" class="mb-3">\n\n                                <div class="col-sm-12">\n                                    <div class="form-check">\n                                        <label class="form-check-label status-publish form-label">\n                                            <input type="radio" class="form-check-input" name="p-status"\n                                                id="p-status1" value="1">\n                                                ').concat(e("Active"),'\n                                        </label>\n                                    </div>\n                                </div>\n\n                                <div class="col-sm-12">\n                                    <div class="form-check">\n                                        <label class="form-check-label status-draft form-label">\n                                            <input type="radio" class="form-check-input" name="p-status"  id="p-status0" value="0">\n                                            ').concat(e("Paused"),'\n                                        </label>\n                                    </div>\n                                </div>\n\n                                <div class="col-sm-12">\n                                    <div class="form-check">\n                                        <label class="form-check-label status-draft form-label">\n                                            <input type="radio" class="form-check-input" name="p-status"  id="p-status0" value="0">\n                                            ').concat(e("Archive"),'\n                                        </label>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <h4 id="elan" class="card-title mb-4">').concat(e("Categories"),'</h4>\n                            <div id="p-cats" class="simple-tags mb-4" data-simple-tags=""></div>\n                            <div class="clearfix"> </div>\n\n                            <div class="d-grid gap-2">\n                                <button class="btn btn-primary btn-save" type="button">').concat(e("Save"),'</button>\n                            </div>\n\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    </div>\n  </div>\n\n  <div class="modal p-modal" tabindex="-1">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h5 class="modal-title"></h5>\n                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n            </div>\n            <div class="modal-body">\n\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-primary btn-modal"></button>\n                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"></button>\n            </div>\n        </div>\n    </div>\n  </div>\n\n  <div class="position-fixed bottom-0 p-2 m-4 end-0 align-items-center">\n    <div class="toast hide align-items-center text-white bg-dark border-0" role="alert" aria-live="assertive"\n        aria-atomic="true" data-bs-delay="3000">\n        <div class="d-flex">\n            <div class="toast-body"></div>\n            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>\n        </div>\n    </div>\n  </div>\n  ')}(h),b.state.response=e,0==e.patient.length)return void b.initListeners("all");b.renderPage(e),b.initHeader(e),b.loadImages(e.patient),b.initListeners("all"),b.state.firstLoad=!1}else c(e)})).catch((function(e){console.error("Error:",e)}))},renderPage:function(e){var t=document,r=e.patient,s=e.settings,c=!1;!function(e){var t,a='<ol class="breadcrumb mt-2 mb-0">',i=n(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;void 0===r.link?a+='<li class="breadcrumb-item">'.concat(r.text,"</li>"):a+='<li class="breadcrumb-item"><a href="'.concat(r.link,'">').concat(r.text,"</a></li>")}}catch(e){i.e(e)}finally{i.f()}a+="</ol>",document.querySelector(".bc").innerHTML=a}([{link:a("https://dashboard/kenzap.cloud"),text:h("Dashboard")},{link:a("/"),text:h("IC Patients")},{link:a("/patient-list/"),text:h("Patient List")},{text:h("Patient Card")}]);var o="";console.log("renderPage");var l,d=n(s.section_fields.split(/\r?\n/));try{for(d.s();!(l=d.n()).done;){var u=l.value;if(u){var m=u.split("|"),f=p(m[0].trim(),{limit:32});switch(m[1].trim()){case"section":c&&(o+="</div>"),o+='\n                    <div>\n                        <div class="'.concat(c?"mt-5":"",' mb-4 d-flex justify-content-between">\n                            <h4 class="card-title">').concat(h(m[0].trim()),'</h4>\n                            <a href="#" data-ecf="" class="btn-section-edit">\n                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-square" viewBox="0 0 16 16">\n                                <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>\n                                <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>\n                                </svg>\n                            </a>\n                        </div>\n                    '),c=!0;break;case"text":o+='\n                    <div class="mb-3 d-flex justify-content-between">\n                        <div class="col-auto">\n                            <span class="form-text text-gray">'.concat(h(m[0].trim()),'</label>\n                        </div>\n                        <div class="col-auto">\n                            <span class="form-text text-dark inp" data-id="').concat(f,'" data-title="').concat(h(m[0].trim()),'" data-type="').concat(m[1].trim(),'">').concat(r[f]?r[f]:h("n/a"),"</span>\n                        </div>\n                    </div>\n                    ");break;case"list":var y="n/a";r[f]&&(y="",r[f].split(/\r?\n/).forEach((function(e){y+='<div class="mb-1">'+e+"</div>"}))),o+='\n\n                    <div class="mb-3 d-flex justify-content-between">\n                        <div class="col-auto">\n                            <span class="form-text text-gray">'.concat(h(m[0].trim()),'</label>\n                        </div>\n                        <div class="col-auto">\n                            <span class="form-text text-dark inp text-end" data-id="').concat(f,'" data-title="').concat(h(m[0].trim()),'" data-type="').concat(m[1].trim(),'">').concat(y,"</span>\n                        </div>\n                    </div>\n                    ")}}}}catch(e){d.e(e)}finally{d.f()}c&&(o+="</div>"),t.querySelector("#card-view").insertAdjacentHTML("beforeEnd",o);var x="";e.records&&e.records.forEach((function(e){var t="";e.tags.forEach((function(e){var n="secondary";b.state.symptoms.danger.includes(e)?n="danger":b.state.symptoms.warning.includes(e)&&(n="warning"),t+='<div class="badge bg-'.concat(n,' text-light fw-light me-1">').concat(e,"</div>")})),x+='\n            <li class="clearfix">\n                <a target="_blank" href="#">'.concat(t,'</a>\n                <p class="mb-1">').concat(e.note,'</p>\n                <span class="float-end form-text text-muted">').concat(new Date(e.time).toLocaleString(),"</span>\n            </li>\n            ")})),""==x?t.querySelector(".timeline").outerHTML=h("Currently, this patient has no active records."):t.querySelector(".timeline").innerHTML=x;var w="";e.patient.prescriptions&&(w+='<table class="table table-hover table-borderless align-middle table-striped table-p-list">',b.state.prescriptions=e.patient.prescriptions,e.patient.prescriptions.forEach((function(e){var t="https://cdn.kenzap.com/loading.png";e.img&&(t=g+"/S"+i()+"/medication-"+e.id+"-1-100x100.jpeg?"+e.time),w+='\n                    <tr>\n                        <td>\n                            <div class="timgc">\n                                <a href="'.concat(a("/medication-edit/?id="+e.id),'"><img src="').concat(t,'" data-srcset="').concat(t,'" class="img-fluid rounded" alt="').concat(h("Drug placeholder"),'" srcset="').concat(t,'" ></a>\n                            </div>\n                        </td>\n                        <td class="destt" style="max-width:250px;min-width:150px;">\n                            <div class="mb-3 mt-3"> \n                                <a class="text-body" href="').concat(a("/medication-edit/?id="+e.id),'" >').concat(e.title,'<i style="color:#9b9b9b;font-size:15px;margin-left:8px;" title="').concat(h("Edit product"),'" class="mdi mdi-pencil menu-icon edit-page"></i></a>\n                            </div>\n                        </td>\n                        <td class="since ">\n                            <div class="float-end form-text text-muted">\n                                ').concat(new Date(e.since).toLocaleString(),'\n                            </div>\n                        </td>\n                        <td class="d-none">\n                            <a href="#" data-id="').concat(e.id,'" class="remove-product text-danger ">\n                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">\n                                    <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>\n                                    <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>\n                                </svg>\n                            </a>\n                        </td>\n                    </tr>'),console.log(e)})),w+="</table>"),""==w&&(w=h("Currently, this patient has no active prescriptions.")),t.querySelector(".prescriptions").innerHTML=w,t.querySelector("#p-name").innerHTML=r.name,t.querySelector("#p-bio").innerHTML=r.bio,t.querySelector("#p-ldesc").value=r.ldesc,document.querySelector("#p-status"+r.status).checked=!0;var S=document.querySelector("#p-cats");r.cats&&S.setAttribute("data-simple-tags",r.cats),new v(S)},initHeader:function(e){l(".nav-back",(function(e){e.preventDefault(),console.log(".nav-back");var t=document.querySelector(".bc ol li:nth-last-child(2)").querySelector("a");o(t)}))},initListeners:function(){console.log("initListeners "),l(".btn-section-edit",b.listeners.editSection),l(".btn-modal",b.listeners.modalSuccessBtn),b.state.firstLoad&&(l(".btn-add",b.listeners.addRecord),l(".add-prescription",b.listeners.addPrescription),l("#nav-tab-2-link",b.listeners.tabAnalytics))},listeners:{addRecord:function(e){var t=document.querySelector(".modal"),n=new bootstrap.Modal(t);t.querySelector(".modal-title").innerHTML=h("Add Record"),t.querySelector(".btn-primary").innerHTML=h("Add"),t.querySelector(".btn-primary").style.display="none",t.querySelector(".btn-secondary").innerHTML=h("Cancel");t.querySelector(".modal-body").innerHTML='            <div class="row">\n                <div class="col col-click text-center">\n                    <img src="/img/_img_cold.png" style="width:100px;height:100px;" >\n                    <p class="text-muted">Cold, runny nose</p>\n                </div>\n                <div class="col col-click text-center">\n                    <img src="/img/_img_fever.png" style="width:100px;height:100px;" >\n                    <p class="text-muted">High fever</p>\n                </div>\n            </div>\n\n            <div class="row mt-4">\n                <div class="col col-click text-center">\n                    <img src="/img/_img_stethoscope.png" style="width:100px;height:100px;" >\n                    <p class="text-muted">Blood pressure, heart</p>\n                </div>\n                <div class="col col-click text-center">\n                    <img src="/img/_img_vomiting.png" style="width:100px;height:100px;" >\n                    <p class="text-muted">Vomitting</p>\n                </div>\n            </div>\n\n            <div class="row mt-4">\n                <div class="col col-click text-center">\n                    <img src="/img/_img_diarrhea.png" style="width:100px;height:100px;" >\n                    <p class="text-muted">Diarrhea</p>\n                </div>\n                <div class="col col-click text-center">\n                    <img src="/img/_img_skin_disease.png" style="width:100px;height:100px;" >\n                    <p class="text-muted">Allergy, rash</p>\n                </div>\n            </div>\n\n            <div class="row mt-4">\n                <div class="col col-click text-center">\n                    <img src="/img/_img_cough.png" style="width:100px;height:100px;" >\n                    <p class="text-muted">Cough</p>\n                </div>\n                <div class="col col-click text-center">\n                    <img src="/img/_img_headache.png" style="width:100px;height:100px;" >\n                    <p class="text-muted">Headache</p>\n                </div>\n            </div>\n\n            <div class="row mt-4">\n                <div class="col col-click text-center">\n                    <img src="/img/_img_conjunctivitis.png" style="width:100px;height:100px;" >\n                    <p class="text-muted">Conjunctivitis</p>\n                </div>\n                <div class="col col-click text-center">\n                    <img src="/img/_img_pain.png" style="width:100px;height:100px;" >\n                    <p class="text-muted">Muscle pain</p>\n                </div>\n            </div>\n            ',b.listeners.modalSuccessBtnFunc=function(e){e.preventDefault();var n={};n.name=t.querySelector("#p-name").value,n.bio=t.querySelector("#p-bio").value,n.note=t.querySelector("#p-note").value,n.status="0",n.img=[],n.cats=[],n.name.length<2?alert(h("Please provide patient's full name")):(fetch("https://api-v1.kenzap.cloud/",{method:"post",headers:{Accept:"application/json","Content-Type":"text/plain",Authorization:"Bearer "+s("kenzap_api_key"),"Kenzap-Token":s("kenzap_token"),"Kenzap-Sid":i()},body:JSON.stringify({query:{patient:{type:"create",key:"ic-patient",data:n}}})}).then((function(e){return e.json()})).then((function(e){e.success?window.location.href="/patient-view/?id=".concat(e.patient.id):c(e),console.log("Success:",e)})).catch((function(e){console.error("Error:",e)})),console.log("savepatient"))},n.show()},addPrescription:function(e){var t=document.querySelector(".modal");b.state.modalCont=new bootstrap.Modal(t),t.querySelector(".modal-title").innerHTML=h("Manage prescription"),t.querySelector(".btn-primary").innerHTML=h("Confirm"),t.querySelector(".btn-primary").style.display="none",t.querySelector(".btn-secondary").innerHTML=h("Close");fetch("https://api-v1.kenzap.cloud/",{method:"post",headers:{Accept:"application/json","Content-Type":"text/plain",Authorization:"Bearer "+s("kenzap_api_key"),"Kenzap-Token":s("kenzap_token"),"Kenzap-Sid":i()},body:JSON.stringify({query:{medications:{type:"find",key:"ic-medication",fields:["_id","id","img","status","cats","title","updated"],limit:b.state.limit,search:{field:"title",s:""},sortby:{field:"title",order:"DESC"}}}})}).then((function(e){return e.json()})).then((function(e){if(m(),e.success){var n='                        <div class="search-cont input-group input-group-sm mb-0 justify-content-start">     \n                            <input type="text" placeholder="Search drugs" class="form-control border-top-0 border-start-0 border-end-0 rounded-0" aria-label="Search products" aria-describedby="inputGroup-sizing-sm" style="max-width: 200px;">\n                        </div>\n                        <table class="table table-hover table-borderless align-middle table-striped table-p-list mt-2">\n                            <thead>\n                                <tr>\n                                    <th>\n                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#212529" class="bi justify-content-end bi-search mb-1" viewBox="0 0 16 16">\n                                            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"></path>\n                                        </svg>\n                                    </th>\n                                    <th>\n                                        <span>Title</span>\n                                    </th>\n                                    <th class="float-end">Prescription</th>\n                                </tr>\n                            </thead>\n                            <tbody>';e.medications.forEach((function(e){var t="https://cdn.kenzap.com/loading.png";void 0===e.img&&(e.img=[]),e.img[0]&&(t=g+"/S"+i()+"/medication-"+e._id+"-1-100x100.jpeg?"+e.updated);var r=b.state.prescriptions.filter((function(t){return t.id==e._id})).length?'checked="true"':"";n+='\n                                    <tr>\n                                        <td>\n                                            <div class="timgc">\n                                                <a href="'.concat(a("/medication-edit/?id="+e._id),'"><img src="').concat(t,'" data-srcset="').concat(t,'" class="img-fluid rounded" alt="').concat(h("Product placeholder"),'" srcset="').concat(t,'" ></a>\n                                            </div>\n                                        </td>\n                                        <td class="destt" style="max-width:250px;min-width:150px;">\n                                            <div class="mb-3 mt-3"> \n                                                <a class="text-body" href="').concat(a("/medication-edit/?id="+e._id),'" >').concat(e.title,'<i style="color:#9b9b9b;font-size:15px;margin-left:8px;" title="').concat(h("Edit product"),'" class="mdi mdi-pencil menu-icon edit-page"></i></a>\n                                            </div>\n                                        </td>\n                                        <td>\n                                            <div class="form-check form-switch float-end">\n                                                <input class="form-check-input toggle-prescribe" type="checkbox" data-img="').concat(e.img[0],'" data-id="').concat(e._id,'" data-title="').concat(e.title,'" role="switch" id="doPrescription" ').concat(r,">\n                                            </div>\n                                        </td>\n                                    </tr>")})),n+="\n                            </tbody>\n                        </table>",t.querySelector(".modal-body").innerHTML=n,b.state.modalCont.show(),d(".toggle-prescribe",b.listeners.doPrescription)}else c(e)})).catch((function(e){console.error("Error:",e)}))},doPrescription:function(e){var t=e.currentTarget.dataset.id;if(e.currentTarget.checked){if(!confirm(h("Are you sure you want to enable prescription?")))return void(e.currentTarget.checked=!1)}else if(!confirm(h("Are you sure you want to cancel prescription?")))return void(e.currentTarget.checked=!0);var n={};e.currentTarget.checked&&(b.state.prescriptions.push({id:t,title:e.currentTarget.dataset.title,img:e.currentTarget.dataset.img,since:(new Date).toISOString(),dosage:{},periods:[],note:"",by:""}),n.prescriptions=b.state.prescriptions),e.currentTarget.checked||(n.prescriptions=b.state.prescriptions.filter((function(e,n,a){return e.id!=t})),console.log("removing")),fetch("https://api-v1.kenzap.cloud/",{method:"post",headers:{Accept:"application/json","Content-Type":"text/plain",Authorization:"Bearer "+s("kenzap_api_key"),"Kenzap-Token":s("kenzap_token"),"Kenzap-Sid":i()},body:JSON.stringify({query:{patient:{type:"update",key:"ic-patient",sid:i(),id:r(),data:n}}})}).then((function(e){return e.json()})).then((function(e){e.success||c(e),console.log("Success:",e)})).catch((function(e){console.error("Error:",e)}))},editSection:function(e){e.preventDefault();var t=document.querySelector(".modal"),a=new bootstrap.Modal(t),o=e.currentTarget.parentNode.parentNode;t.querySelector(".modal-title").innerHTML=h(o.querySelector(".card-title").innerHTML),t.querySelector(".btn-primary").innerHTML=h("Save"),t.querySelector(".btn-secondary").innerHTML=h("Cancel");var l,d='\n            <div class="form-cont">',p=n(o.querySelectorAll(".inp"));try{for(p.s();!(l=p.n()).done;){var u=l.value,m="n/a"==u.innerHTML.trim()?"":u.innerHTML;switch(u.dataset.type){case"text":d+='\n                        <div class="form-group mb-3">\n                            <label for="'.concat(u.dataset.id,'" class="form-label">').concat(h(u.dataset.title),'</label>\n                            <input type="text" class="form-control inp-m" data-id="').concat(u.dataset.id,'" autocomplete="off" placeholder="" value="').concat(m,'">\n                        </div>');break;case"list":var v=m.replace('</div><div class="mb-1">',"\n");v=v.replace('<div class="mb-1">',"").replace("</div>",""),d+='\n                        <div class="form-group mb-3">\n                            <label for="'.concat(u.dataset.id,'" class="form-label">').concat(h(u.dataset.title),'</label>\n                            <textarea class="form-control inp-m" data-id="').concat(u.dataset.id,'" autocomplete="off" placeholder="" rows="7" >').concat(v,'</textarea>\n                            <p class="form-text">').concat(h("Provide one record per line."),"</p>                        </div>")}}}catch(e){p.e(e)}finally{p.f()}d+="</div>",t.querySelector(".modal-body").innerHTML=d,b.listeners.modalSuccessBtnFunc=function(e){e.preventDefault();var o,l={},d=n(t.querySelectorAll(".inp-m"));try{for(d.s();!(o=d.n()).done;){var p=o.value;l[p.dataset.id]=p.value}}catch(e){d.e(e)}finally{d.f()}var u=r(),m=i();fetch("https://api-v1.kenzap.cloud/",{method:"post",headers:{Accept:"application/json","Content-Type":"text/plain",Authorization:"Bearer "+s("kenzap_api_key"),"Kenzap-Token":s("kenzap_token"),"Kenzap-Sid":m},body:JSON.stringify({query:{patient:{type:"update",key:"ic-patient",id:u,sid:m,data:l}}})}).then((function(e){return e.json()})).then((function(e){if(e.success){console.log("updated"),a.hide(),b.getData();var t=new bootstrap.Toast(document.querySelector(".toast"));document.querySelector(".toast .toast-body").innerHTML=h("Patient data updated"),t.show()}else c(e);console.log("Success:",e)})).catch((function(e){console.error("Error:",e)})),console.log("savepatient")},a.show(),setTimeout((function(){t.querySelector("input")?t.querySelector("input").focus():t.querySelector("textarea")&&t.querySelector("textarea").focus()}),100)},savePatient:function(e){e.preventDefault();var t,a={},o=n(document.querySelectorAll(".inp"));try{for(o.s();!(t=o.n()).done;){var l=t.value;a[l.id.replace("p-","")]=l.value}}catch(e){o.e(e)}finally{o.f()}a.cats=[];var d,p=n(document.querySelectorAll("#p-cats ul li"));try{for(p.s();!(d=p.n()).done;){var m=d.value;a.cats.push(m.innerHTML.replace("<a>×</a>","").trim())}}catch(e){p.e(e)}finally{p.f()}a.img=[];var v,f=n(document.querySelectorAll(".p-img"));try{for(f.s();!(v=f.n()).done;){var h=!v.value.getAttribute("src").includes("placeholder");a.img.push(h)}}catch(e){f.e(e)}finally{f.f()}a.status=document.querySelector('input[name="p-status"]:checked').value,a.variations=[];var g,y=0,x=n(document.querySelectorAll(".variation-blocks .var-block"));try{for(x.s();!(g=x.n()).done;){var w,S=g.value,k=0,q=n(S.querySelectorAll(".offer-pricef li"));try{for(q.s();!(w=q.n()).done;){var A=w.value;void 0===a.variations[y]&&(a.variations[y]={title:S.getAttribute("data-title"),type:S.getAttribute("data-type"),required:S.getAttribute("data-required"),data:[]}),a.variations[y].data[k]={title:A.getAttribute("data-title"),price:A.getAttribute("data-price"),cond:A.getAttribute("data-cond")},k++}}catch(e){q.e(e)}finally{q.f()}y++}}catch(e){x.e(e)}finally{x.f()}console.log(a);var T=r(),z=i();u(),fetch("https://api-v1.kenzap.cloud/",{method:"post",headers:{Accept:"application/json","Content-Type":"text/plain",Authorization:"Bearer "+s("kenzap_api_key")},body:JSON.stringify({query:{patient:{type:"update",key:"ic-patient",id:T,sid:z,data:a}}})}).then((function(e){return e.json()})).then((function(e){e.success?b.uploadImages():c(e),console.log("Success:",e)})).catch((function(e){console.error("Error:",e)})),console.log("savePatient")},openImage:function(e){e.preventDefault(),o(document.querySelector(".aif-"+e.currentTarget.dataset.index))},previewImage:function(e){e.preventDefault();var t=e.currentTarget,n=new bootstrap.Toast(document.querySelector(".p-toast"));if(t.files&&t.files[0]){if("image/jpeg"!=t.files[0].type&&"image/jpg"!=t.files[0].type&&"image/png"!=t.files[0].type)return document.querySelector(".p-toast .toast-body").innerHTML=h("Please provide image in JPEG format"),void n.show();if(t.files[0].size>5e6)return document.querySelector(".p-toast .toast-body").innerHTML=h("Please provide image less than 5 MB in size!"),void n.show();var a=t.dataset.index,i=new FileReader;i.onload=function(e){console.log("target "+e.currentTarget.result),document.querySelector(".images-"+a).setAttribute("src",e.currentTarget.result)},i.readAsDataURL(t.files[0]),e.currentTarget.parentElement.querySelector(".remove").classList.remove("hd")}},removeImage:function(e){var t=e.currentTarget.parentElement.dataset.index;document.querySelector(".aif-"+t).value="",document.querySelector(".images-"+t).setAttribute("src","https://account.kenzap.com/images/placeholder.jpg"),e.currentTarget.classList.add("hd")},tabAnalytics:function(e){!function(e,t){if(!Array.from(document.querySelectorAll("script")).some((function(t){return t.src==e}))){var n=document.createElement("script");n.onload=t,n.src=e,document.getElementsByTagName("head")[0].appendChild(n)}}("https://www.gstatic.com/charts/loader.js",(function(){b.state.tabAnalytics=!0,setTimeout((function(){b.renderAnalytics()}),300)}))},modalSuccessBtn:function(e){console.log("calling modalSuccessBtnFunc"),b.listeners.modalSuccessBtnFunc(e)},modalSuccessBtnFunc:null},renderAnalytics:function(){google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback((function(){var t=google.visualization.arrayToDataTable(e),n={title:h("Blood Pressure"),curveType:"function",legend:{position:"bottom"}};new google.visualization.LineChart(document.getElementById("chart")).draw(t,n)}));var e=[[h("Time"),h("Upper"),h("Lower")]];b.state.response.records&&b.state.response.records.forEach((function(t){t.tags.includes("hypertension")&&t.values&&t.time&&e.push([new Date(t.time).toLocaleString(),parseInt(t.values.upper),parseInt(t.values.lower)])}));console.log(e),console.log([["Year","Sales","Expenses"],["2004",1e3,400],["2005",1170,460],["2006",660,1120],["2007",1030,540]])},loadImages:function(e){for(var t=document,n=r(),a=i(),s="",c=0;c<5;c++){var o=void 0!==e.img&&"true"==e.img[c]?"https://preview.kenzap.cloud/S"+i()+"/_site/images/patient-"+e.id+"-"+(c+1)+"-100x100.jpeg?"+e.updated:"https://account.kenzap.com/images/placeholder.jpg";s+='          <div class="p-img-cont float-start">            <p data-index="'.concat(c,'">              <img class="p-img images-').concat(c,'" data-index="').concat(c,'" width="100" height="100" src="').concat(o,'" />              <span class="remove hd" title="').concat(h("Remove"),'">×</span>            </p>            <input type="file" name="img[]" data-type="search" data-index="').concat(c,'" class="file aif-').concat(c,' d-none">          </div>')}t.querySelector(".ic").innerHTML=s,l(".p-img-cont img",b.listeners.openImage),l(".p-img-cont .remove",b.listeners.removeImage),d(".p-img-cont .file",b.listeners.previewImage);for(var p=0;p<5;p++){var u=g+"/S"+a+"/patient-"+n+"-"+(parseInt(p)+1)+"-250.jpeg?"+e.updated;setTimeout((function(n,a,i){var r=!0;if(void 0!==e.img&&(e.img[i]||(r=!1)),r){var s=new Image;s.onload=function(){t.querySelector(a+i).setAttribute("src",n),t.querySelector(a+i).parentElement.querySelector(".remove").classList.remove("hd")},s.src=n}}),300,u,".images-",p)}},uploadImages:function(){document.querySelector(".imgupnote")&&document.querySelector(".imgupnote").remove();var e,t=0,a=n(document.querySelectorAll(".file"));try{for(a.s();!(e=a.n()).done;){var c=e.value;t+=1;var o=r(),l=i(),d=c.files[0];if(void 0!==d){var p=new FormData;p.append("id",o),p.append("sid",l),p.append("pid",o),p.append("key","image"),p.append("sizes","1000|500|250|100x100"),p.append("file",d),p.append("slug","patient-"+o+"-"+t),p.append("token",s("kenzap_token")),d.value="",b.state.ajaxQueue+=1,fetch("https://api-v1.kenzap.cloud/upload/",{body:p,method:"post"}).then((function(e){return e.json()})).then((function(e){if(b.state.ajaxQueue-=1,e.success&&0==b.state.ajaxQueue){var t=new bootstrap.Toast(document.querySelector(".toast"));document.querySelector(".toast .toast-body").innerHTML=h("Order updated"),t.show(),m()}}))}}}catch(e){a.e(e)}finally{a.f()}if(0==b.state.ajaxQueue){var u=new bootstrap.Toast(document.querySelector(".toast"));document.querySelector(".toast .toast-body").innerHTML=h("Order updated"),u.show(),m()}}};b.init()}();
