{"version":3,"file":"index.js","sources":["../../src/_/_helpers.js","../../src/_/_ui.js","../../src/_/_cnt_orders.js","../../src/_/_i18n.js","../../src/orders/index.js"],"sourcesContent":["export const link = (slug) => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let sid = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    let postfix = slug.indexOf('?') == -1 ? '?sid='+sid : '&sid='+sid;\n\n    return slug + postfix;\n}\n\nexport const getSiteId = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    return id;\n}\n\nexport const getPatientId = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('id') ? urlParams.get('id') : \"\";\n    return id;\n}\n\nexport const getMedicationId = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('id') ? urlParams.get('id') : \"\";\n    return id;\n}\n\nexport const getProductIdFromLink = () => {\n    \n    let url = new URL(window.location.href);\n    let id = url.pathname.trim().split('/').slice(-2)[0];\n    return id;\n}\n\nexport const getPageNumber = () => {\n\n    let url = window.location.href.split('/');\n    let page = url[url.length-1];\n    let pageN = 1;\n    if(page.indexOf('page')==0){\n      pageN = page.replace('page', '').replace('#', '');\n    }\n    // console.log(pageN);\n    return parseInt(pageN);\n}\n\nexport const getPagination = (meta, cb) => {\n\n    if(typeof(meta) === 'undefined'){ document.querySelector(\"#listing_info\").innerHTML = 'no records to display'; return; }\n\n    let offset = meta.limit+meta.offset;\n    if(offset>meta.total_records) offset = meta.total_records;\n\n    document.querySelector(\"#listing_info\").innerHTML = \"Showing \"+(1+meta.offset)+\" to \"+(offset)+\" of \"+meta.total_records+\" entries\";\n\n    let pbc = Math.ceil(meta.total_records / meta.limit);\n    // console.log(pbc);\n    document.querySelector(\"#listing_paginate\").style.display = (pbc < 2) ? \"none\" : \"block\";\n\n    // page 1 \n\n    // page 3\n    // 1 2\n\n    // page 5\n    // 2 3 4 .. \n\n    let page = getPageNumber(); \n    let html = '<ul class=\"pagination d-flex justify-content-end pagination-flat\">';\n    html += '<li class=\"paginate_button page-item previous\" id=\"listing_previous\"><a href=\"#\" aria-controls=\"order-listing\" data-type=\"prev\" data-page=\"0\" tabindex=\"0\" class=\"page-link\"><span aria-hidden=\"true\">&laquo;</span></li>';\n    let i = 0;\n    while(i<pbc){\n\n        i++; \n        if(((i >= page-3) && (i <= page)) || ((i <= page+3) && (i >=page))){\n\n            html += '<li class=\"paginate_button page-item '+((page==i)?'active':'')+'\"><a href=\"#\" aria-controls=\"order-listing\" data-type=\"page\" data-page=\"'+i+'\" tabindex=\"0\" class=\"page-link\">'+(page==i?'..':i)+'</a></li>';      \n        }\n    }  \n    html += '<li class=\"paginate_button page-item next\" id=\"order-listing_next\"><a href=\"#\" aria-controls=\"order-listing\" data-type=\"next\" data-page=\"2\" tabindex=\"0\" class=\"page-link\"><span aria-hidden=\"true\">&raquo;</span></a></li>';\n    html += '</ul>'\n\n    document.querySelector(\"#listing_paginate\").innerHTML = html;\n\n    let page_link = document.querySelectorAll(\".page-link\");\n    for (const l of page_link) {\n        l.addEventListener('click', function(e) {\n\n            let p = parseInt(getPageNumber());\n            let ps = p;\n            switch(l.dataset.type){ \n                case 'prev': p-=1; if(p<1) p = 1; break;\n                case 'page': p=l.dataset.page; break;\n                case 'next': p+=1; if(p>pbc) p = pbc; break;\n            }\n            \n            // update url\n            if (window.history.replaceState) {\n\n                let url = window.location.href.split('/page');\n                let urlF = (url[0]+'/page'+p).replace('//page', '/page');\n\n                // prevents browser from storing history with each change:\n                window.history.replaceState(\"kenzap-cloud\", document.title, urlF);\n            }\n\n            // only refresh if page differs\n            if(ps!=p) cb();\n            \n            e.preventDefault();\n            return false;\n        });\n    }\n}\n\nexport const formatStatus = (st) => {\n\n    st = parseInt(st); \n    switch(st){ \n      case 0: return '<div class=\"badge bg-warning text-dark fw-light\">Archive</div>';\n      case 1: return '<div class=\"badge bg-primary fw-light\">Active</div>';\n      case 3: return '<div class=\"badge bg-secondary fw-light\">Experimental</div>';\n      default: return '<div class=\"badge bg-secondary fw-light\">Drafts</div>';\n    }\n}\n\nexport const formatApplication = (application) => {\n\n    let html = '';\n    if(Array.isArray(application)) application.forEach(val => {\n\n        html += '<div class=\"badge bg-light text-dark fw-light me-1\">'+val+'</div>'\n    });\n\n    return html;\n}\n\nexport const formatPrice = (price) => {\n\n    const formatter = new Intl.NumberFormat('en-US', { style: 'currency', currency: \"USD\", });\n    if(typeof(price) === 'undefined' || price == '') price = 0;\n    price = parseFloat(price);\n    price = formatter.format(price);\n    return price;\n}\n\nexport const formatTime = (timestamp) => {\n\t\n    let a = new Date(timestamp * 1000);\n    let months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n    let year = a.getFullYear();\n    let month = months[a.getMonth()];\n    let date = a.getDate();\n    let hour = a.getHours();\n    let min = a.getMinutes();\n    let sec = a.getSeconds();\n    let time = date + ' ' + month + ' ' + year; // + ' ' + hour + ':' + min + ':' + sec ;\n    return time;\n}\n\nexport const getCookie = (cname) => {\n\n    let name = cname + \"=\";\n    let decodedCookie = decodeURIComponent(document.cookie);\n    let ca = decodedCookie.split(';');\n    for (let i = 0; i < ca.length; i++) {\n        let c = ca[i];\n        while (c.charAt(0) == ' ') {\n            c = c.substring(1);\n        }\n        if (c.indexOf(name) == 0) {\n            return c.substring(name.length, c.length);\n        }\n    }\n    return \"\";\n}\n\n// parse backend error to frontend\nexport const parseApiError = (data) => {\n\n    // alert(data.reason);\n    // return; \n    switch(data.code){\n\n        // case 401: location.href=\"https://auth.kenzap.com/?redirectF.php?referral=\"+window.location.href; break;\n        default: alert(data.reason); break;\n    }\n}\n\n// init breadcrumbs navigation\nexport const initBreadcrumbs = (data) => {\n\n    let html = '<ol class=\"breadcrumb mt-2 mb-0\">';\n    for(let bc of data){\n        \n        if(typeof(bc.link) === 'undefined'){\n\n            html += `<li class=\"breadcrumb-item\">${ bc.text }</li>`;\n        }else{\n\n            html += `<li class=\"breadcrumb-item\"><a href=\"${ bc.link }\">${ bc.text }</a></li>`;\n        }\n    }\n    html += '</ol>';\n    \n    document.querySelector(\".bc\").innerHTML = html;\n}\n\n/**\n * Simulate a click event.\n * @public\n * @param {Element} elem  the element to simulate a click on\n */\n export const simulateClick = (elem) => {\n\t// Create our event (with options)\n\tvar evt = new MouseEvent('click', {\n\t\tbubbles: true,\n\t\tcancelable: true,\n\t\tview: window\n\t});\n\t// If cancelled, don't dispatch our event\n\tvar canceled = !elem.dispatchEvent(evt);\n};\n\n// nums only validation\nexport const numsOnly = (e, max) => {\n\n    // Only ASCII charactar in that range allowed \n    var ASCIICode = (e.which) ? e.which : e.keyCode \n    if (ASCIICode > 31 && ASCIICode != 46 && (ASCIICode < 48 || ASCIICode > 57)) \n    return false; \n\n    if(parseFloat(e.target.value)>max) \n    return false; \n\n    let dec = e.target.value.split('.');\n    if(dec.length>1)\n    if(dec[1].length>1)\n        return false;\n    \n    return true; \n}\n\nexport const onClick = (sel, fn) => {\n\n    // console.log('onClick');\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('click', fn, true);\n        e.addEventListener('click', fn, true);\n    }\n}\n\nexport const onKeyUp = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('keyup', fn, true);\n        e.addEventListener('keyup', fn, true);\n    }\n}\n\nexport const onChange = (sel, fn) => {\n\n    // console.log('onChange');\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('change', fn, true);\n        e.addEventListener('change', fn, true);\n    }\n}\n\n// time elapsed since creation \nexport const timeConverterAgo = (now, time) => {\n\n    console.log(now + \" \" + time);\n\n    now = parseInt(now);\n    time = parseInt(time);\n\n    console.log(now + \" \" + time);\n\n    // parse as elapsed time\n    let past = now - time;\n    if(past < 60) return 'moments ago';\n    if(past < 3600) return parseInt(past / 60) + ' minutes ago';\n    if(past < 86400) return parseInt(past / 60 / 24) + ' hours ago';\n\n    // process as normal date\n    var a = new Date(time * 1000);\n    var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n    var year = a.getFullYear();\n    var month = months[a.getMonth()];\n    var date = a.getDate();\n    var hour = a.getHours();\n    var min = a.getMinutes();\n    var sec = a.getSeconds();\n    var time = date + ' ' + month + ' ' + year; // + ' ' + hour + ':' + min + ':' + sec ;\n    return time;\n}\n\n/**\n * Create a web friendly URL slug from a string.\n *\n * Requires XRegExp (http://xregexp.com) with unicode add-ons for UTF-8 support.\n *\n * Although supported, transliteration is discouraged because\n *     1) most web browsers support UTF-8 characters in URLs\n *     2) transliteration causes a loss of information\n *\n * @author Sean Murphy <sean@iamseanmurphy.com>\n * @copyright Copyright 2012 Sean Murphy. All rights reserved.\n * @license http://creativecommons.org/publicdomain/zero/1.0/\n *\n * @param string s\n * @param object opt\n * @return string\n */\nexport const slugify = (s, opt) => {\n\n\ts = String(s);\n\topt = Object(opt);\n\t\n\tvar defaults = {\n\t\t'delimiter': '-',\n\t\t'limit': undefined,\n\t\t'lowercase': true,\n\t\t'replacements': {},\n\t\t'transliterate': (typeof(XRegExp) === 'undefined') ? true : false\n\t};\n\t\n\t// Merge options\n\tfor (var k in defaults) {\n\t\tif (!opt.hasOwnProperty(k)) {\n\t\t\topt[k] = defaults[k];\n\t\t}\n\t}\n\t\n\tvar char_map = {\n\t\t// Latin\n\t\t'À': 'A', 'Á': 'A', 'Â': 'A', 'Ã': 'A', 'Ä': 'A', 'Å': 'A', 'Æ': 'AE', 'Ç': 'C', \n\t\t'È': 'E', 'É': 'E', 'Ê': 'E', 'Ë': 'E', 'Ì': 'I', 'Í': 'I', 'Î': 'I', 'Ï': 'I', \n\t\t'Ð': 'D', 'Ñ': 'N', 'Ò': 'O', 'Ó': 'O', 'Ô': 'O', 'Õ': 'O', 'Ö': 'O', 'Å': 'O', \n\t\t'Ø': 'O', 'Ù': 'U', 'Ú': 'U', 'Û': 'U', 'Ü': 'U', 'Å°': 'U', 'Ý': 'Y', 'Þ': 'TH', \n\t\t'ß': 'ss', \n\t\t'à': 'a', 'á': 'a', 'â': 'a', 'ã': 'a', 'ä': 'a', 'å': 'a', 'æ': 'ae', 'ç': 'c', \n\t\t'è': 'e', 'é': 'e', 'ê': 'e', 'ë': 'e', 'ì': 'i', 'í': 'i', 'î': 'i', 'ï': 'i', \n\t\t'ð': 'd', 'ñ': 'n', 'ò': 'o', 'ó': 'o', 'ô': 'o', 'õ': 'o', 'ö': 'o', 'Å': 'o', \n\t\t'ø': 'o', 'ù': 'u', 'ú': 'u', 'û': 'u', 'ü': 'u', 'Å±': 'u', 'ý': 'y', 'þ': 'th', \n\t\t'ÿ': 'y',\n\n\t\t// Latin symbols\n\t\t'©': '(c)',\n\n\t\t// Greek\n\t\t'Α': 'A', 'Β': 'B', 'Γ': 'G', 'Δ': 'D', 'Ε': 'E', 'Ζ': 'Z', 'Η': 'H', 'Θ': '8',\n\t\t'Ι': 'I', 'Κ': 'K', 'Λ': 'L', 'Μ': 'M', 'Ν': 'N', 'Ξ': '3', 'Ο': 'O', 'Π': 'P',\n\t\t'Ρ': 'R', 'Σ': 'S', 'Τ': 'T', 'Υ': 'Y', 'Φ': 'F', 'Χ': 'X', 'Ψ': 'PS', 'Ω': 'W',\n\t\t'Î': 'A', 'Î': 'E', 'Î': 'I', 'Î': 'O', 'Î': 'Y', 'Î': 'H', 'Î': 'W', 'Îª': 'I',\n\t\t'Î«': 'Y',\n\t\t'α': 'a', 'β': 'b', 'γ': 'g', 'δ': 'd', 'ε': 'e', 'ζ': 'z', 'η': 'h', 'θ': '8',\n\t\t'ι': 'i', 'κ': 'k', 'λ': 'l', 'μ': 'm', 'ν': 'n', 'ξ': '3', 'ο': 'o', 'π': 'p',\n\t\t'ρ': 'r', 'σ': 's', 'τ': 't', 'υ': 'y', 'φ': 'f', 'χ': 'x', 'ψ': 'ps', 'ω': 'w',\n\t\t'Î¬': 'a', 'Î­': 'e', 'Î¯': 'i', 'Ï': 'o', 'Ï': 'y', 'Î®': 'h', 'Ï': 'w', 'ς': 's',\n\t\t'Ï': 'i', 'Î°': 'y', 'Ï': 'y', 'Î': 'i',\n\n\t\t// Turkish\n\t\t'Å': 'S', 'Ä°': 'I', 'Ç': 'C', 'Ü': 'U', 'Ö': 'O', 'Ä': 'G',\n\t\t'Å': 's', 'Ä±': 'i', 'ç': 'c', 'ü': 'u', 'ö': 'o', 'Ä': 'g', \n\n\t\t// Russian\n\t\t'Ð': 'A', 'Ð': 'B', 'Ð': 'V', 'Ð': 'G', 'Ð': 'D', 'Ð': 'E', 'Ð': 'Yo', 'Ð': 'Zh',\n\t\t'Ð': 'Z', 'Ð': 'I', 'Ð': 'J', 'Ð': 'K', 'Ð': 'L', 'Ð': 'M', 'Ð': 'N', 'Ð': 'O',\n\t\t'Ð': 'P', 'Ð ': 'R', 'Ð¡': 'S', 'Ð¢': 'T', 'Ð£': 'U', 'Ð¤': 'F', 'Ð¥': 'H', 'Ð¦': 'C',\n\t\t'Ð§': 'Ch', 'Ð¨': 'Sh', 'Ð©': 'Sh', 'Ðª': '', 'Ð«': 'Y', 'Ð¬': '', 'Ð­': 'E', 'Ð®': 'Yu',\n\t\t'Ð¯': 'Ya',\n\t\t'Ð°': 'a', 'Ð±': 'b', 'Ð²': 'v', 'Ð³': 'g', 'Ð´': 'd', 'Ðµ': 'e', 'Ñ': 'yo', 'Ð¶': 'zh',\n\t\t'Ð·': 'z', 'Ð¸': 'i', 'Ð¹': 'j', 'Ðº': 'k', 'Ð»': 'l', 'Ð¼': 'm', 'Ð½': 'n', 'Ð¾': 'o',\n\t\t'Ð¿': 'p', 'Ñ': 'r', 'Ñ': 's', 'Ñ': 't', 'Ñ': 'u', 'Ñ': 'f', 'Ñ': 'h', 'Ñ': 'c',\n\t\t'Ñ': 'ch', 'Ñ': 'sh', 'Ñ': 'sh', 'Ñ': '', 'Ñ': 'y', 'Ñ': '', 'Ñ': 'e', 'Ñ': 'yu',\n\t\t'Ñ': 'ya',\n\n\t\t// Ukrainian\n\t\t'Ð': 'Ye', 'Ð': 'I', 'Ð': 'Yi', 'Ò': 'G',\n\t\t'Ñ': 'ye', 'Ñ': 'i', 'Ñ': 'yi', 'Ò': 'g',\n\n\t\t// Czech\n\t\t'Ä': 'C', 'Ä': 'D', 'Ä': 'E', 'Å': 'N', 'Å': 'R', 'Š': 'S', 'Å¤': 'T', 'Å®': 'U', \n\t\t'Å½': 'Z', \n\t\t'Ä': 'c', 'Ä': 'd', 'Ä': 'e', 'Å': 'n', 'Å': 'r', 'š': 's', 'Å¥': 't', 'Å¯': 'u',\n\t\t'Å¾': 'z', \n\n\t\t// Polish\n\t\t'Ä': 'A', 'Ä': 'C', 'Ä': 'e', 'Å': 'L', 'Å': 'N', 'Ó': 'o', 'Å': 'S', 'Å¹': 'Z', \n\t\t'Å»': 'Z', \n\t\t'Ä': 'a', 'Ä': 'c', 'Ä': 'e', 'Å': 'l', 'Å': 'n', 'ó': 'o', 'Å': 's', 'Åº': 'z',\n\t\t'Å¼': 'z',\n\n\t\t// Latvian\n\t\t'Ä': 'A', 'Ä': 'C', 'Ä': 'E', 'Ä¢': 'G', 'Äª': 'i', 'Ä¶': 'k', 'Ä»': 'L', 'Å': 'N', \n\t\t'Š': 'S', 'Åª': 'u', 'Å½': 'Z', \n\t\t'Ä': 'a', 'Ä': 'c', 'Ä': 'e', 'Ä£': 'g', 'Ä«': 'i', 'Ä·': 'k', 'Ä¼': 'l', 'Å': 'n',\n\t\t'š': 's', 'Å«': 'u', 'Å¾': 'z'\n\t};\n\t\n\t// Make custom replacements\n\tfor (var k in opt.replacements) {\n\t\ts = s.replace(RegExp(k, 'g'), opt.replacements[k]);\n\t}\n\t\n\t// Transliterate characters to ASCII\n\tif (opt.transliterate) {\n\t\tfor (var k in char_map) {\n\t\t\ts = s.replace(RegExp(k, 'g'), char_map[k]);\n\t\t}\n\t}\n\t\n\t// Replace non-alphanumeric characters with our delimiter\n\tvar alnum = (typeof(XRegExp) === 'undefined') ? RegExp('[^a-z0-9]+', 'ig') : XRegExp('[^\\\\p{L}\\\\p{N}]+', 'ig');\n\ts = s.replace(alnum, opt.delimiter);\n\t\n\t// Remove duplicate delimiters\n\ts = s.replace(RegExp('[' + opt.delimiter + ']{2,}', 'g'), opt.delimiter);\n\t\n\t// Truncate slug to max. characters\n\ts = s.substring(0, opt.limit);\n\t\n\t// Remove delimiter from ends\n\ts = s.replace(RegExp('(^' + opt.delimiter + '|' + opt.delimiter + '$)', 'g'), '');\n\t\n\treturn opt.lowercase ? s.toLowerCase() : s;\n}","// show loader\nexport const showLoader = () => {\n\n    let el = document.querySelector(\".loader\");\n    if (el) el.style.display = 'block';\n}\n\n// hide loader\nexport const hideLoader = () => {\n\n    let el = document.querySelector(\".loader\");\n    if (el) el.style.display = 'none';\n}\n\n// hide loader\nexport const initFooter = (left, right) => {\n\n    document.querySelector(\"footer .row\").innerHTML = `\n    <div class=\"d-sm-flex justify-content-center justify-content-sm-between\">\n        <span class=\"text-muted text-center text-sm-left d-block d-sm-inline-block\">${left}</span>\n        <span class=\"float-none float-sm-right d-block mt-1 mt-sm-0 text-center text-muted\">${right}</span>\n    </div>`;\n}\n\n// categories input tags\nexport const simpleTags = (element) => {\n\n    if (!element) {\n        throw new Error(\"DOM Element is undifined! Please choose HTML target element.\")\n    }\n\n    let DOMParent = element\n    let DOMList\n    let DOMInput\n    let dataAttribute\n    let arrayOfList\n\n    function DOMCreate() {\n        let ul = document.createElement(\"ul\")\n        let input = document.createElement(\"input\")\n\n        input.setAttribute('placeholder', 'new entry');\n\n        DOMParent.appendChild(ul)\n        DOMParent.appendChild(input)\n\n        // first child is <ul>\n        DOMList = DOMParent.firstElementChild\n        // last child is <input>\n        DOMInput = DOMParent.lastElementChild\n    }\n\n    function DOMRender() {\n        // clear the entire <li> inside <ul>\n        DOMList.innerHTML = \"\"\n\n        // render each <li> to <ul>\n        arrayOfList.forEach((currentValue, index) => {\n\n            if (currentValue) {\n\n                let li = document.createElement(\"li\")\n                li.innerHTML = `${currentValue} <a>&times;</a>`\n                li.querySelector(\"a\").addEventListener(\"click\", function () {\n                    onDelete(index)\n                })\n\n                DOMList.appendChild(li)\n            }\n        })\n\n        setAttribute()\n    }\n\n    function onKeyUp() {\n        DOMInput.addEventListener(\"keyup\", function (event) {\n            let text = this.value.trim()\n\n            // check if ',' or 'enter' key was press\n            if (text.includes(\",\") || event.keyCode === 13) {\n                // check if empty text when ',' is remove\n                if (text.replace(\",\", \"\") !== \"\") {\n                    // push to array and remove ','\n                    arrayOfList.push(text.replace(\",\", \"\"))\n                }\n                // clear input\n                this.value = \"\"\n            }\n\n            DOMRender()\n        })\n    }\n\n    function onDelete(id) {\n        arrayOfList = arrayOfList.filter(function (currentValue, index) {\n            if (index === id) {\n                return false\n            }\n            return currentValue\n        })\n\n        DOMRender()\n    }\n\n    function getAttribute() {\n        dataAttribute = DOMParent.getAttribute(\"data-simple-tags\")\n        dataAttribute = dataAttribute.split(\",\")\n\n        // store array of data attribute in arrayOfList\n        arrayOfList = dataAttribute.map((currentValue) => {\n            return currentValue.trim()\n        })\n    }\n\n    function setAttribute() {\n        DOMParent.setAttribute(\"data-simple-tags\", arrayOfList.toString())\n    }\n\n    getAttribute()\n    DOMCreate()\n    DOMRender()\n    onKeyUp()\n}\n","export const HTMLContent = (__) => {\n\n    return `\n      <div class=\"container ec-orders\">\n        <div class=\"d-flex justify-content-between bd-highlight mb-3\">\n            <nav class=\"bc\" aria-label=\"breadcrumb\"></nav>\n        </div>\n        <div class=\"row\">\n          <div class=\"col-md-12 page-title\">\n            <div class=\"st-opts st-table mb-3 dropdown\">\n                <a class=\"btn btn-primary dropdown-toggle\" href=\"#\" role=\"button\" id=\"order-status\" data-id=\"status\" data-value=\"\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\n                  All\n                </a>\n                <ul class=\"dropdown-menu\" aria-labelledby=\"order-status\">\n                  <li><a class=\"dppi dropdown-item\" data-key=\"\" href=\"#\" >All</a></li>\n                  <li><a class=\"dppi dropdown-item\" data-key=\"new\" href=\"#\" >New</a></li>\n                  <li><a class=\"dppi dropdown-item\" data-key=\"processing\" href=\"#\" >Processing</a></li>\n                  <li><a class=\"dppi dropdown-item\" data-key=\"completed\" href=\"#\" >Completed</a></li>\n                  <li><a class=\"dppi dropdown-item\" data-key=\"canceled\" href=\"#\" >Canceled</a></li>\n                  <li><a class=\"dppi dropdown-item\" data-key=\"failed\" href=\"#\" >Failed</a></li>\n                </ul>\n            </div>\n            <div class=\"st-opts\" >\n              <div class=\"input-group-sm mb-0 justify-content-start\" >\n                <input id=\"usearch\" type=\"text\" class=\"inp form-control search-input\" placeholder=\"${ __('Search order') }\">\n              </div>\n              <!-- <a id=\"viewSum\" href=\"#\" style=\"margin-left:16px;\">view summary</a> -->\n            </div>\n          </div>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-md-12 grid-margin grid-margin-lg-0 grid-margin-md-0 stretch-card\">\n            <div class=\"card border-white shadow-sm\">\n              <div class=\"card-body\">\n \n                <div class=\"table-responsive\">\n                  <table class=\"table table-hover table-borderless align-middle table-striped table-p-list\">\n                    <thead>\n                      <tr>\n\n                        <th>From</th>\n                        <th>Status</th>\n                        <th>Total</th>\n                        <th>Time</th>\n                        <th></th>\n                      </tr>\n                    </thead>\n                    <tbody class=\"list\">\n\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"modal order-modal\" tabindex=\"-1\">\n        <div class=\"modal-dialog \">\n          <div class=\"modal-content\">\n              <div class=\"modal-header\">\n                <h5 class=\"modal-title\"></h5>\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n              </div>\n              <div class=\"modal-body\">\n              \n              </div>\n              <div class=\"modal-footer\">\n                <button type=\"button\" class=\"btn btn-primary\"></button>\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\"></button>\n              </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"position-fixed bottom-0 p-sm-2 m-sm-4 end-0 align-items-center\" >   \n        <div class=\"toast hide align-items-center text-white bg-dark border-0\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" data-bs-delay=\"3000\">\n          <div class=\"d-flex\">  \n            <div class=\"toast-body\"></div>\n            <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\n          </div>\n        </div>\n      </div>\n    `;\n}","// parse backend error to frontend\n// taking this structire for prototype http://i18njs.com/#language_files\nexport let i18n = {\n\n    state: {\n        locale: null,\n    },\n    init: (locale) => { \n    \n        i18n.state.locale = locale;\n    },\n    __: (text) => {\n\n        if(i18n.state.locale.values[text] === undefined) return text;\n\n        return i18n.state.locale.values[text];\n    }\n}","// js dependencies\nimport { getSiteId, simulateClick, getCookie, initBreadcrumbs, parseApiError, timeConverterAgo, formatPrice, onClick, onKeyUp, link } from \"../_/_helpers.js\"\nimport { showLoader, hideLoader, initFooter } from \"../_/_ui.js\"\nimport { HTMLContent } from \"../_/_cnt_orders.js\"\nimport { i18n } from \"../_/_i18n.js\"\n \n// init localization function\nconst __ = i18n.__;\n \n// public file storage\nconst CDN = 'https://kenzap-sites.oss-ap-southeast-1.aliyuncs.com';\n\n// where everything happens\nconst _this = {\n  \n    state: {\n        firstLoad: true,\n        firstTouch: true,\n        playSoundNow: false,\n        newOrderCount: 0,\n        orderIDs: [],\n        orders: [],\n        playTitleTimer: null,\n        refreshTimer: null,\n        statuses: [],\n        audio: new Audio('https://kenzap.com/static/swiftly.mp3'),\n        limit: 50, // number of records to load per table\n    },\n    init: () => {\n         \n        _this.getData();\n\n        _this.state.refreshTimer = setInterval(() => { _this.getData(); }, 7000);\n    },\n    getData: () => {\n\n        // show loader during first load\n        if (_this.state.firstLoad) showLoader();\n\n        // search content\n        let s = document.querySelector('.search-input') ? document.querySelector('.search-input').value : '';\n\n        // search term \n        let term = document.querySelector('#order-status') ? document.querySelector('#order-status').dataset.value: '';\n        \n        // do API query\n        fetch('https://api-v1.kenzap.cloud/', {\n            method: 'post',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'text/plain',\n                'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n                'Kenzap-Token': getCookie('kenzap_token'),\n                'Kenzap-Sid': getSiteId(),\n            },\n            body: JSON.stringify({\n                query: {\n                    user: {\n                        type:       'authenticate',\n                        fields:     ['avatar'],\n                        token:      getCookie('kenzap_token')\n                    },\n                    locale: {\n                        type:       'locale',\n                        id:         getCookie('lang')\n                    },\n                    orders: {\n                        type:       'find',\n                        key:        'ecommerce-order',\n                        fields:     '*',\n                        term:       term != '' ? 'status=\\'' + term +'\\'' : '',\n                        limit:      _this.state.limit,\n                        search:     {                                                           // if s is empty search query is ignored\n                            field: 'from',\n                            s: s\n                        },\n                        sortby:     {\n                            field: 'created',\n                            order: 'DESC'\n                        }\n                    }\n                }\n            })\n        })\n        .then(response => response.json())\n        .then(response => {\n\n            // hide UI loader\n            hideLoader();\n\n            if(response.success){\n\n                // initiate locale\n                i18n.init(response.locale);\n\n                // get core html content \n                _this.loadPageStructure();  \n\n                // render table\n                _this.renderPage(response);\n\n                // init header\n                _this.initHeader(response);\n\n                // bind content listeners\n                _this.initListeners();\n            \n                // initiate footer\n                _this.initFooter();\n\n                // first load\n                _this.state.firstLoad = false;\n\n            }else{\n\n                parseApiError(response);\n            }\n        })\n        .catch(error => {\n            console.error('Error:', error);\n        });\n    },\n    initHeader: (response) => {\n\n        onClick('.nav-back', (e) => {\n\n            e.preventDefault();\n            let link = document.querySelector('.bc ol li:nth-last-child(2)').querySelector('a');\n            simulateClick(link);\n        });\n    },\n    authUser: (response) => {\n\n        if(response.user){\n            \n            if(response.user.success == true){\n\n                \n            }\n        }\n    },\n    loadPageStructure: () => {\n\n        if(!_this.state.firstLoad) return;\n\n        // get core html content \n        document.querySelector('#contents').innerHTML = HTMLContent(__);\n    },\n    renderPage: (response) => {\n\n        if(_this.state.firstLoad){\n\n            // initiate breadcrumbs\n            initBreadcrumbs(\n                [\n                    { link: link('https://dashboard.kenzap.cloud'), text: __('Dashboard') },\n                    { link: link('/'), text: __('E-commerce') },\n                    { text: __('Orders') }\n                ]\n            );\n\n            // initialize statuses\n            _this.state.statuses = {\n                'new': { \n                    text: __('New'),\n                    class: 'btn-warning text-dark fw-light'\n                },\n                'processing': { \n                    text: __('Processing'),\n                    class: 'btn-primary fw-light'\n                },\n                'completed': { \n                    text: __('Completed'),\n                    class: 'btn-success fw-light'\n                },\n                'canceled': { \n                    text: __('Canceled'),\n                    class: 'btn-secondary fw-light'\n                },\n                'failed': { \n                    text: __('Failed'),\n                    class: 'btn-danger fw-light'\n                }\n            };\n        }\n\n        // cache orders globally\n        _this.state.orders = response.orders;\n\n        // no orders in the list\n        if (response.orders.length == 0) {\n\n            document.querySelector(\".table tbody\").innerHTML = `<tr><td colspan=\"5\">${ __(\"No orders to display.\") }</td></tr>`;\n            return;\n        }\n\n        // generate website table\n        let orderIDsTemp = [];\n        _this.state.newOrderCount = [];\n\n        let list = '', count_new = 0;\n        for (let i in response.orders) {\n\n            let img = 'https://cdn.kenzap.com/loading.png';\n            orderIDsTemp.push(response.orders[i]._id);\n\n            if(typeof(response.orders[i].status) === 'undefined') response.orders[i].status = 'new';\n\n            if(response.orders[i].status == 'new') count_new ++;\n            // if(typeof(response.products[i].img) === 'undefined') response.products[i].img = [];\n            // // if(typeof(response.products[i].img) !== 'undefined' && response.products[i].img[0] == 'true') img = 'https://preview.kenzap.cloud/S1000452/_site/images/product-'+response.products[i].id+'-1-100x100.jpeg?1630925420';\n            // if(response.products[i].img[0]) img = CDN + '/S'+sid+'/product-'+response.products[i]._id+'-1-100x100.jpeg?'+response.products[i].updated;\n                \n            let classN = ((_this.state.orderIDs.includes(response.orders[i]._id) || _this.state.firstLoad)?'':'new');\n            list += `\n            <tr class=\"${ classN }\">\n              <td class=\"destt\" style=\"max-width:250px;min-width:250px;\">\n                <div>\n                  <b>${ response.orders[i].from }</b><div class=\"elipsized fst-italic\">${ response.orders[i].note }</div>\n                </div>\n              </td>\n              <td>\n                <span style=\"font-size:24px;\">${ _this.getStatus(response.orders[i].status) }</span>\n              </td>\n              <td>\n                <span style=\"font-size:18px;\">${ formatPrice(response.orders[i].total) }</span>\n              </td>\n              <td class=\"\">\n                <span style=\"font-size:18px;\">${ timeConverterAgo(response.meta.time, response.orders[i].created) }</span>\n              </td>\n              <td class=\"last\">\n                <a href=\"#\" data-id=\"${ response.orders[i]._id }\" data-index=\"${ i }\" class=\"view-order text-success me-4\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-eye\" viewBox=\"0 0 16 16\">\n                    <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z\"/>\n                    <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z\"/>\n                </svg></a>\n                <a href=\"#\" data-id=\"${ response.orders[i]._id }\" data-index=\"${ i }\" class=\"remove-order text-danger \"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"22\" fill=\"currentColor\" class=\"bi bi-trash\" viewBox=\"0 0 16 16\">\n                    <path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z\"/>\n                    <path fill-rule=\"evenodd\" d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z\"/>\n                </svg></a>\n              </td>\n            </tr>`;\n        }\n        \n        _this.state.playSoundNow = count_new > 0 ? true : false;\n\n        // if(_this.state.playSoundNow) _this.playSound();\n        // if(_this.state.newOrderCount>0) _this.playTitle('('+_this.state.newOrderCount+') new orders.');\n\n        // _this.state.firstLoad = false;\n        _this.state.orderIDs = orderIDsTemp;\n\n        // populate fields\n        // for (let field in response.settings){\n\n        //     if(typeof(response.settings[field]) === \"undefined\") continue;\n        //     if(response.settings[field] == \"\") continue;\n        //     if(document.querySelector(\"#\"+field)) switch(document.querySelector(\"#\"+field).dataset.type){\n        \n        //         case 'text':   \n        //         case 'email':  \n        //         case 'emails':  \n        //         case 'select':\n        //         case 'textarea': document.querySelector(\"#\"+field).value = response.settings[field]; break;\n        //         // case 'radio': $(\"#\"+field).parent().parent().parent().parent().parent().find(\"input[value=\" + data.res[field] + \"]\").prop('checked', true); break;\n        //     }\n        // }\n\n        // for(let s of document.querySelectorAll('.form-control')){\n\n        //     switch(s.dataset.type){\n          \n        //         case 'text':   \n        //         case 'email':  \n        //         case 'emails':  \n        //         case 'select':\n        //         case 'textarea': data[s.id] = s.value; break;\n        //         case 'radio': data[s.id] = s.parentElement.parentElement.parentElement.parentElement.parentElement.querySelector('input:checked').value; break;\n        //     }\n\n        // let sid = getSiteId();\n\n        // bind settings data\n  \n        // provide result to the page\n        document.querySelector(\".table tbody\").innerHTML = list;\n    },\n    // parse visual page status\n    getStatus: (status) => {\n    \n        return `<div class=\"badge ${ _this.state.statuses[status].class }\">${ _this.state.statuses[status].text }</div>`;\n    },\n    // play notification sound. Ex.: when new order received\n    playSound: () => {\n \n        \n        // var audiosWeWantToUnlock = [];\n        // audiosWeWantToUnlock.push(new Audio('https://kenzap.com/static/swiftly.mp3'))\n       \n        //where earlier you did:var audiosWeWantToUnlock = []audiosWeWantToUnlock.push(new Audio('mySoundEffect.wav'))audiosWeWantToUnlock.push(new Audio('myOtherSoundEffect.wav'))\n\n        console.log('playSound');\n\n        // const audio = new Audio(\"https://kenzap.com/static/swiftly.mp3\");\n        _this.state.audio.play();\n\n    },\n    playTitle: (msg) => {\n\n        // if(_this.state.playTitleTimer) clearInterval(_this.state.playTitleTimer);\n        // _this.state.playTitleTimer = setInterval(() => { if(_this.state.playSoundNow) _this.playSound(); }, 6500);\n\n        // if(_this.state.playTitleTimer) clearInterval(_this.state.playTitleTimer);\n        // if(_this.state.playTitleTimer2) clearInterval(_this.state.playTitleTimer2);\n    \n        // _this.state.playTitleTimer = setInterval(() => { document.title = \"Orders - Kenzap Cloud\"; }, 1000);\n        // _this.state.playTitleTimer2 = setInterval(() => {  document.title = msg; }, 2050);    \n    },\n    initListeners: () => {\n\n        // view order\n        onClick('.view-order', _this.listeners.viewOrder);\n\n        // remove order\n        onClick('.remove-order', _this.listeners.removeOrder);\n\n        // table status change listener\n        onClick('.st-table li a', _this.listeners.changeStatus);\n\n        // break here if initListeners is called more than once\n        if(!_this.state.firstLoad) return;\n\n        // modal success button\n        onClick('.modal .btn-primary', _this.listeners.modalSuccessBtn);\n        \n        // search orders\n        onKeyUp('.search-input', _this.listeners.searchOrders);\n        // add product modal\n        // onClick('.btn-save', _this.saveSettings);\n        \n        document.body.addEventListener('touchstart', function() {\n\n            if(_this.state.firstTouch){\n\n                _this.state.audio.play();\n                _this.state.audio.pause();\n                _this.state.audio.currentTime = 0\n                _this.state.firstTouch = false;\n            }else{\n\n                // _this.playTitle();\n                if(_this.state.playTitleTimer) clearInterval(_this.state.playTitleTimer);\n                _this.state.playTitleTimer = setInterval(() => { if(_this.state.playSoundNow) _this.playSound(); }, 6500);\n            }\n\n        }, false);\n    },\n    listeners: {\n\n        changeStatus: (e) => {\n\n            e.preventDefault();\n\n            console.log(e.currentTarget.dataset.key);\n\n            let os = document.querySelector('#order-status');\n            if(e.currentTarget.dataset.key == \"\"){\n                os.innerHTML = __('All')\n                os.dataset.value = '';\n            }else{\n                os.innerHTML = _this.state.statuses[e.currentTarget.dataset.key].text;\n                os.dataset.value = e.currentTarget.dataset.key;\n            }\n\n            let list = [];\n\n            // clear previous classes\n            Object.keys(_this.state.statuses).forEach((key) => {\n                list = _this.state.statuses[key].class.split(' ');\n                list.forEach((key) => { \n                    os.classList.remove(key);\n                });    \n            });\n\n            // add new classes\n            if(e.currentTarget.dataset.key==''){\n                \n                os.classList.add('btn-primary');\n            }else{\n                list = _this.state.statuses[e.currentTarget.dataset.key].class.split(' ');\n                list.forEach((key) => { \n                    os.classList.add(key);\n                });\n            }\n\n            // reload table\n            _this.getData();\n        },\n\n        viewOrder: (e) => {\n\n            let modal = document.querySelector(\".order-modal\");\n            let modalCont = new bootstrap.Modal(modal);\n            let i = e.currentTarget.dataset.index;\n            let items = '';\n\n            Object.keys(_this.state.statuses).forEach((key, index) => {\n\n                console.log(key);\n                items += `<li><a class=\"dppi dropdown-item\" data-key=\"${ key }\" href=\"#\">${ _this.state.statuses[key].text }</a></li>`\n            })\n\n            // get order status\n            let statusSelect = `\n            <div class=\"st-modal st-opts mb-3 me-3 dropdown\">\n                <a class=\"btn btn-sm ${ _this.state.statuses[_this.state.orders[i]['status']].class } dropdown-toggle order-form\" data-id=\"status\" data-type=\"key\" data-value=\"new\" href=\"#\" role=\"button\" id=\"order-status-modal\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\" >\n                    ${ _this.state.statuses[_this.state.orders[i]['status']].text }\n                </a>\n                <ul class=\"dropdown-menu\" aria-labelledby=\"order-status-modal\">\n                    ${ items }\n                </ul>\n            </div>`;\n\n            // structure modal\n            modal.querySelector(\".modal-dialog\").classList.add('modal-dialog-wide'); // '<div class=\"badge bg-warning text-dark fw-light me-3 mb-1\">'+__('New')+'</div>' + \n            modal.querySelector(\".modal-header .modal-title\").innerHTML = statusSelect + _this.state.orders[i]['from'];\n            modal.querySelector(\".modal-footer .btn-primary\").innerHTML = __('Update');\n            // modal.querySelector(\".btn-primary\").style.display = 'none';\n            modal.querySelector(\".modal-footer .btn-secondary\").innerHTML = __('Close');\n\n            let html = ``;\n\n            console.log(i);\n            console.log(_this.state.orders[i]._id);\n\n            let fields = {_id: {l: \"ID\"}, from: {l: \"From\", e: \"text\", editable: true}, items: {l: \"\", e: \"items\"}, fname: {l: \"Name\", e: \"text\"}, lname: {l: \"Surname\", e: \"text\"}, bios: {l: \"Bios\", e: \"textarea\"}, avatar: {l: \"Avatar\", e: \"text\"}, email: {l: \"Email\", e: \"text\"}, countryr: {l: \"Country\", e: \"text\"}, cityr: {l: \"City\", e: \"text\"}, addr1: {l: \"Address 1\", e: \"textarea\"}, addr2: {l: \"Address 2\", e: \"textarea\"}, post: {l: \"Post\", e: \"text\"}, state: {l: \"State\", e: \"text\"}, c1: {l: \"Whatsapp\", e: \"text\"}, c2: {l: \"Messenger\", e: \"text\"}, c3: {l: \"Line\", e: \"text\"}, c4: {l: \"Email\", e: \"text\"}, c5: {l: \"Telegram\", e: \"text\"}, email: {l: \"Email\", e: \"text\"}, bio: {l: \"Bio\", e: \"text\"}, y1: {l: \"Name\", e: \"text\"}, y2: {l: \"IBAN\", e: \"text\"}, y3: {l: \"SWIFT\", e: \"text\"}, y4: {l: \"Bank\", e: \"text\"}, y5: {l: \"Bank city\", e: \"text\"}, y6: {l: \"Bank country\", e: \"text\"}, note: {l: \"Note\", e: \"textarea\"}, total: {l: \"Total\", e: \"text\"}, s3: {l: \"Link 3\", e: \"text\"}, company: {l: \"Company\", e: \"text\"}, vat: {l: \"Tax ID\", e: \"text\"}, grade: {l: \"Grade\", e: \"text\"}, kenzap_ida: {l: \"Kenzap IDA\", e: \"text\"} };\n\n            // order table details\n            for(let x in fields){\n\n                if(_this.state.orders[i][x] === undefined) continue;\n\n                let val = _this.state.orders[i][x];\n                let field = fields[x].l;\n\n                if (x=='total'){ val = formatPrice(val); }\n\n                html += '\\\n                <div class=\"mb-3 mt-3\">\\\n                    <b>'+field+'</b>&nbsp;'+_this.renderField(fields[x], val, x)+'\\\n                </div>';\n\n            }\n\n            // user details\n            // for(let x in _this.state.orders[i]){\n\n            //     if(fields[x] === undefined) continue;\n            //     let val = _this.state.orders[i][x];\n            //     let field = fields[x].l;\n\n            //     if (x=='total'){ val = formatPrice(val); }\n\n            //     html += '\\\n            //     <div class=\"mb-3 mt-3\">\\\n            //         <b>'+field+'</b>&nbsp;'+_this.renderField(fields[x], val, x)+'\\\n            //     </div>';\n            // }\n        \n            html += '';\n            modal.querySelector(\".modal-body\").innerHTML = html;\n            modalCont.show();\n\n            _this.listeners.modalSuccessBtnFunc = (e) => {\n\n                e.preventDefault();\n\n                _this.updateOrder(_this.state.orders[i]._id);\n                \n                modalCont.hide();\n                // let note = modal.querySelector(\".modal #note\").value;\n                // let data = []; data['title'] = mtitle; \n            }\n\n            onClick('.st-modal li a', (e) => {\n\n                e.preventDefault();\n\n                console.log(e.currentTarget.dataset.key);\n\n                let osm = document.querySelector('#order-status-modal');\n                osm.innerHTML = _this.state.statuses[e.currentTarget.dataset.key].text;\n                osm.dataset.value = e.currentTarget.dataset.key;\n                let list = [];\n\n                // clear previous classes\n                Object.keys(_this.state.statuses).forEach((key) => {\n                    list = _this.state.statuses[key].class.split(' ');\n                    list.forEach((key) => { \n                        osm.classList.remove(key);\n                    });    \n                });\n\n                // add new classes\n                list = _this.state.statuses[e.currentTarget.dataset.key].class.split(' ');\n                list.forEach((key) => { \n                    // console.log(key);\n                    osm.classList.add(key);\n                });    \n\n                // let link = document.querySelector('.bc ol li:nth-last-child(2)').querySelector('a');\n                // simulateClick(link);\n            });\n        },\n        removeOrder: (e) => {\n\n            e.preventDefault();\n\n            let c = confirm( __('Completely remove this order?') );\n\n            if(!c) return;\n  \n            // send data\n            fetch('https://api-v1.kenzap.cloud/', {\n                method: 'post',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'text/plain',\n                    'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n                    'Kenzap-Token': getCookie('kenzap_token'),\n                    'Kenzap-Sid': getSiteId(),\n                },\n                body: JSON.stringify({\n                    query: {\n                        product: {\n                            type:       'delete',\n                            key:        'ecommerce-order',   \n                            id:         e.currentTarget.dataset.id,  \n                            sid:        getSiteId(),\n                        }\n                    }\n                })\n            })\n            .then(response => response.json())\n            .then(response => {\n\n                if (response.success){\n\n                    // modalCont.hide();\n\n                    _this.getData();\n\n                }else{\n\n                    parseApiError(response);\n                }\n                \n                console.log('Success:', response);\n            })\n            .catch(error => {\n                console.error('Error:', error);\n            });\n \n        },\n \n        searchOrders: (e) => {\n\n            e.preventDefault();\n\n            // _this.playSound();\n\n            _this.getData();\n\n            // console.log('search products ' +e.currentTarget.value);\n        },\n\n        modalSuccessBtn: (e) => {\n            \n            console.log('calling modalSuccessBtnFunc');\n            _this.listeners.modalSuccessBtnFunc(e);\n        },\n\n        modalSuccessBtnFunc: null\n    },\n    renderField: (a, b, x) => {\n\n        switch(a.e){\n            // case 'text': return '<input type=\"text\" class=\"form-control pv\" id=\"'+x+'\" value=\"'+b+'\">';\n            case 'text': return b;\n            case 'textarea': return '<textarea type=\"text\" rows=\"4\" class=\"form-control order-form pv \" data-type=\"textarea\" id=\"'+x+'\" value=\"'+b+'\">'+b+'</textarea>';\n            case 'items': \n\n                // parse product items\n                let html = '<table class=\"items\"><tr><th>Product</th><th class=\"qty\">Quantity</th><th class=\"tp\">Total</th></tr>';\n                for(let x in b){\n\n                // parse variations\n                let vars = '';\n                for(let v in b[x].variations){\n\n                    // parse variation list\n                    let list = ''; for(let l in b[x].variations[v].list) list += b[x].variations[v].list[l].title + \" \";\n                    vars += '<div><b>' + b[x].variations[v].title + \"</b> <span>\" + list + \"</span></div> \";\n\n                    // meal note\n                    if(b[x].variations[v].note !== undefined && b[x].variations[v].note.length > 0) vars += \"<div><b>Note</b> \" + b[x].variations[v].note + \"</div> \";\n                }\n\n                html += '<tr>';\n                html += '<td><div>' + b[x].title + '</div><div>' + b[x].note + '</div><div class=\"vars border-primary\">' + vars + '</div></td><td class=\"qty\"><span>' + b[x].qty + '</span></td><td class=\"tp\"><span>' + formatPrice(b[x].priceF) + '</span></td>';\n                html += '</tr>';\n                }\n\n                html += '</table>';\n            \n            return html;\n            default: return b;\n        }\n    },\n    updateOrder: (id) => {\n\n        let data = {};\n\n        // iterate through all fields\n        for(let s of document.querySelectorAll('.order-form')){\n\n            switch(s.dataset.type){\n          \n                case 'key': data[s.dataset.id] = s.dataset.value; break;\n                case 'text':   \n                case 'email':  \n                case 'emails':  \n                case 'select':\n                case 'textarea': data[s.id] = s.value; break;\n                case 'radio': data[s.id] = s.parentElement.parentElement.parentElement.parentElement.parentElement.querySelector('input:checked').value; break;\n            }\n        }\n\n        // send data\n        fetch('https://api-v1.kenzap.cloud/', {\n            method: 'post',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'text/plain',\n                'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n                'Kenzap-Token': getCookie('kenzap_token'),\n                'Kenzap-Sid': getSiteId(),\n            },\n            body: JSON.stringify({\n                query: {\n                    settings: {\n                        type:       'update',\n                        key:        'ecommerce-order',        \n                        sid:        getSiteId(),\n                        id:         id,\n                        data:       data\n                    }\n                }\n            })\n        })\n        .then(response => response.json())\n        .then(response => {\n\n            if (response.success){\n\n                let toast = new bootstrap.Toast(document.querySelector('.toast'));\n                document.querySelector('.toast .toast-body').innerHTML = __('Order updated');  \n                toast.show();\n                \n                _this.getData();\n\n            }else{\n\n                parseApiError(response);\n            }\n            \n            console.log('Success:', response);\n        })\n        .catch(error => {\n            console.error('Error:', error);\n        });\n\n        console.log('saveOrder');\n    },\n    initFooter: () => {\n        \n        initFooter(__('Copyright © '+new Date().getFullYear()+' <a class=\"text-muted\" href=\"https://kenzap.com/\" target=\"_blank\">Kenzap</a>. All rights reserved.'), __('Kenzap Cloud Services - Dashboard'));\n    }\n}\n\n_this.init();"],"names":["link","slug","urlParams","URLSearchParams","window","location","search","sid","get","postfix","indexOf","getSiteId","id","formatPrice","price","formatter","Intl","NumberFormat","style","currency","parseFloat","format","getCookie","cname","name","decodedCookie","decodeURIComponent","document","cookie","ca","split","i","length","c","charAt","substring","parseApiError","data","code","alert","reason","initBreadcrumbs","html","bc","text","querySelector","innerHTML","simulateClick","elem","evt","MouseEvent","bubbles","cancelable","view","dispatchEvent","onClick","sel","fn","querySelectorAll","e","removeEventListener","addEventListener","onKeyUp","timeConverterAgo","now","time","console","log","parseInt","past","a","Date","months","year","getFullYear","month","getMonth","date","getDate","getHours","getMinutes","getSeconds","showLoader","el","display","hideLoader","initFooter","left","right","HTMLContent","__","i18n","state","locale","init","values","undefined","_this","firstLoad","firstTouch","playSoundNow","newOrderCount","orderIDs","orders","playTitleTimer","refreshTimer","statuses","audio","Audio","limit","getData","setInterval","s","value","term","dataset","fetch","method","headers","body","JSON","stringify","query","user","type","fields","token","key","field","sortby","order","then","response","json","success","loadPageStructure","renderPage","initHeader","initListeners","error","preventDefault","authUser","orderIDsTemp","list","count_new","push","_id","status","classN","includes","from","note","getStatus","total","meta","created","playSound","play","playTitle","msg","listeners","viewOrder","removeOrder","changeStatus","modalSuccessBtn","searchOrders","pause","currentTime","clearInterval","currentTarget","os","Object","keys","forEach","classList","remove","add","modal","modalCont","bootstrap","Modal","index","items","statusSelect","l","editable","fname","lname","bios","avatar","email","countryr","cityr","addr1","addr2","post","c1","c2","c3","c4","c5","x","val","renderField","show","modalSuccessBtnFunc","updateOrder","hide","osm","confirm","product","b","vars","v","variations","title","qty","priceF","parentElement","settings","toast","Toast"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAO,IAAMA,IAAI,GAAG,SAAPA,IAAO,CAACC,IAAD,EAAU;EAE1B,MAAIC,SAAS,GAAG,IAAIC,eAAJ,CAAoBC,MAAM,CAACC,QAAP,CAAgBC,MAApC,CAAhB;EACA,MAAIC,GAAG,GAAGL,SAAS,CAACM,GAAV,CAAc,KAAd,IAAuBN,SAAS,CAACM,GAAV,CAAc,KAAd,CAAvB,GAA8C,EAAxD;EAEA,MAAIC,OAAO,GAAGR,IAAI,CAACS,OAAL,CAAa,GAAb,KAAqB,CAAC,CAAtB,GAA0B,UAAQH,GAAlC,GAAwC,UAAQA,GAA9D;EAEA,SAAON,IAAI,GAAGQ,OAAd;EACH,CARM;EAUA,IAAME,SAAS,GAAG,SAAZA,SAAY,GAAM;EAE3B,MAAIT,SAAS,GAAG,IAAIC,eAAJ,CAAoBC,MAAM,CAACC,QAAP,CAAgBC,MAApC,CAAhB;EACA,MAAIM,EAAE,GAAGV,SAAS,CAACM,GAAV,CAAc,KAAd,IAAuBN,SAAS,CAACM,GAAV,CAAc,KAAd,CAAvB,GAA8C,EAAvD;EAEA,SAAOI,EAAP;EACH,CANM;EAoIA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,KAAD,EAAW;EAElC,MAAMC,SAAS,GAAG,IAAIC,IAAI,CAACC,YAAT,CAAsB,OAAtB,EAA+B;EAAEC,IAAAA,KAAK,EAAE,UAAT;EAAqBC,IAAAA,QAAQ,EAAE;EAA/B,GAA/B,CAAlB;EACA,MAAG,OAAOL,KAAP,KAAkB,WAAlB,IAAiCA,KAAK,IAAI,EAA7C,EAAiDA,KAAK,GAAG,CAAR;EACjDA,EAAAA,KAAK,GAAGM,UAAU,CAACN,KAAD,CAAlB;EACAA,EAAAA,KAAK,GAAGC,SAAS,CAACM,MAAV,CAAiBP,KAAjB,CAAR;EACA,SAAOA,KAAP;EACH,CAPM;EAuBA,IAAMQ,SAAS,GAAG,SAAZA,SAAY,CAACC,KAAD,EAAW;EAEhC,MAAIC,IAAI,GAAGD,KAAK,GAAG,GAAnB;EACA,MAAIE,aAAa,GAAGC,kBAAkB,CAACC,QAAQ,CAACC,MAAV,CAAtC;EACA,MAAIC,EAAE,GAAGJ,aAAa,CAACK,KAAd,CAAoB,GAApB,CAAT;;EACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,EAAE,CAACG,MAAvB,EAA+BD,CAAC,EAAhC,EAAoC;EAChC,QAAIE,CAAC,GAAGJ,EAAE,CAACE,CAAD,CAAV;;EACA,WAAOE,CAAC,CAACC,MAAF,CAAS,CAAT,KAAe,GAAtB,EAA2B;EACvBD,MAAAA,CAAC,GAAGA,CAAC,CAACE,SAAF,CAAY,CAAZ,CAAJ;EACH;;EACD,QAAIF,CAAC,CAACvB,OAAF,CAAUc,IAAV,KAAmB,CAAvB,EAA0B;EACtB,aAAOS,CAAC,CAACE,SAAF,CAAYX,IAAI,CAACQ,MAAjB,EAAyBC,CAAC,CAACD,MAA3B,CAAP;EACH;EACJ;;EACD,SAAO,EAAP;EACH,CAfM;EAkBA,IAAMI,aAAa,GAAG,SAAhBA,aAAgB,CAACC,IAAD,EAAU;EAInC,UAAOA,IAAI,CAACC,IAAZ;EAGI;EAASC,MAAAA,KAAK,CAACF,IAAI,CAACG,MAAN,CAAL;EAAoB;EAHjC;EAKH,CATM;EAYA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACJ,IAAD,EAAU;EAErC,MAAIK,IAAI,GAAG,mCAAX;;EAFqC,8CAGvBL,IAHuB;EAAA;;EAAA;EAGrC,2DAAmB;EAAA,UAAXM,EAAW;;EAEf,UAAG,OAAOA,EAAE,CAAC3C,IAAV,KAAoB,WAAvB,EAAmC;EAE/B0C,QAAAA,IAAI,4CAAoCC,EAAE,CAACC,IAAvC,UAAJ;EACH,OAHD,MAGK;EAEDF,QAAAA,IAAI,sDAA6CC,EAAE,CAAC3C,IAAhD,gBAA2D2C,EAAE,CAACC,IAA9D,cAAJ;EACH;EACJ;EAZoC;EAAA;EAAA;EAAA;EAAA;;EAarCF,EAAAA,IAAI,IAAI,OAAR;EAEAf,EAAAA,QAAQ,CAACkB,aAAT,CAAuB,KAAvB,EAA8BC,SAA9B,GAA0CJ,IAA1C;EACH,CAhBM;EAuBC,IAAMK,aAAa,GAAG,SAAhBA,aAAgB,CAACC,IAAD,EAAU;EAEvC,MAAIC,GAAG,GAAG,IAAIC,UAAJ,CAAe,OAAf,EAAwB;EACjCC,IAAAA,OAAO,EAAE,IADwB;EAEjCC,IAAAA,UAAU,EAAE,IAFqB;EAGjCC,IAAAA,IAAI,EAAEjD;EAH2B,GAAxB,CAAV;EAMA,EAAe,CAAC4C,IAAI,CAACM,aAAL,CAAmBL,GAAnB;EAChB,CATO;EA8BD,IAAMM,OAAO,GAAG,SAAVA,OAAU,CAACC,GAAD,EAAMC,EAAN,EAAa;EAGhC,MAAG9B,QAAQ,CAACkB,aAAT,CAAuBW,GAAvB,CAAH;EAAA,gDAA8C7B,QAAQ,CAAC+B,gBAAT,CAA0BF,GAA1B,CAA9C;EAAA;;EAAA;EAAgC,6DAA8C;EAAA,YAArCG,CAAqC;EAE1EA,QAAAA,CAAC,CAACC,mBAAF,CAAsB,OAAtB,EAA+BH,EAA/B,EAAmC,IAAnC;EACAE,QAAAA,CAAC,CAACE,gBAAF,CAAmB,OAAnB,EAA4BJ,EAA5B,EAAgC,IAAhC;EACH;EAJD;EAAA;EAAA;EAAA;EAAA;EAAA;EAKH,CARM;EAUA,IAAMK,OAAO,GAAG,SAAVA,OAAU,CAACN,GAAD,EAAMC,EAAN,EAAa;EAEhC,MAAG9B,QAAQ,CAACkB,aAAT,CAAuBW,GAAvB,CAAH;EAAA,gDAA8C7B,QAAQ,CAAC+B,gBAAT,CAA0BF,GAA1B,CAA9C;EAAA;;EAAA;EAAgC,6DAA8C;EAAA,YAArCG,CAAqC;EAE1EA,QAAAA,CAAC,CAACC,mBAAF,CAAsB,OAAtB,EAA+BH,EAA/B,EAAmC,IAAnC;EACAE,QAAAA,CAAC,CAACE,gBAAF,CAAmB,OAAnB,EAA4BJ,EAA5B,EAAgC,IAAhC;EACH;EAJD;EAAA;EAAA;EAAA;EAAA;EAAA;EAKH,CAPM;EAoBA,IAAMM,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,GAAD,EAAMC,IAAN,EAAe;EAE3CC,EAAAA,OAAO,CAACC,GAAR,CAAYH,GAAG,GAAG,GAAN,GAAYC,IAAxB;EAEAD,EAAAA,GAAG,GAAGI,QAAQ,CAACJ,GAAD,CAAd;EACAC,EAAAA,IAAI,GAAGG,QAAQ,CAACH,IAAD,CAAf;EAEAC,EAAAA,OAAO,CAACC,GAAR,CAAYH,GAAG,GAAG,GAAN,GAAYC,IAAxB;EAGA,MAAII,IAAI,GAAGL,GAAG,GAAGC,IAAjB;EACA,MAAGI,IAAI,GAAG,EAAV,EAAc,OAAO,aAAP;EACd,MAAGA,IAAI,GAAG,IAAV,EAAgB,OAAOD,QAAQ,CAACC,IAAI,GAAG,EAAR,CAAR,GAAsB,cAA7B;EAChB,MAAGA,IAAI,GAAG,KAAV,EAAiB,OAAOD,QAAQ,CAACC,IAAI,GAAG,EAAP,GAAY,EAAb,CAAR,GAA2B,YAAlC;EAGjB,MAAIC,CAAC,GAAG,IAAIC,IAAJ,CAASN,IAAI,GAAG,IAAhB,CAAR;EACA,MAAIO,MAAM,GAAG,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,EAAoC,KAApC,EAA2C,KAA3C,EAAkD,KAAlD,EAAyD,KAAzD,EAAgE,KAAhE,EAAuE,KAAvE,EAA8E,KAA9E,CAAb;EACA,MAAIC,IAAI,GAAGH,CAAC,CAACI,WAAF,EAAX;EACA,MAAIC,KAAK,GAAGH,MAAM,CAACF,CAAC,CAACM,QAAF,EAAD,CAAlB;EACA,MAAIC,IAAI,GAAGP,CAAC,CAACQ,OAAF,EAAX;EACA,EAAWR,CAAC,CAACS,QAAF;EACX,EAAUT,CAAC,CAACU,UAAF;EACV,EAAUV,CAAC,CAACW,UAAF;EACV,MAAIhB,IAAI,GAAGY,IAAI,GAAG,GAAP,GAAaF,KAAb,GAAqB,GAArB,GAA2BF,IAAtC;EACA,SAAOR,IAAP;EACH,CA1BM;;ECrRA,IAAMiB,UAAU,GAAG,SAAbA,UAAa,GAAM;EAE5B,MAAIC,EAAE,GAAGxD,QAAQ,CAACkB,aAAT,CAAuB,SAAvB,CAAT;EACA,MAAIsC,EAAJ,EAAQA,EAAE,CAACjE,KAAH,CAASkE,OAAT,GAAmB,OAAnB;EACX,CAJM;EAOA,IAAMC,UAAU,GAAG,SAAbA,UAAa,GAAM;EAE5B,MAAIF,EAAE,GAAGxD,QAAQ,CAACkB,aAAT,CAAuB,SAAvB,CAAT;EACA,MAAIsC,EAAJ,EAAQA,EAAE,CAACjE,KAAH,CAASkE,OAAT,GAAmB,MAAnB;EACX,CAJM;EAOA,IAAME,UAAU,GAAG,SAAbA,UAAa,CAACC,IAAD,EAAOC,KAAP,EAAiB;EAEvC7D,EAAAA,QAAQ,CAACkB,aAAT,CAAuB,aAAvB,EAAsCC,SAAtC,sLAEkFyC,IAFlF,oHAG0FC,KAH1F;EAKH,CAPM;;ECfA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,EAAD,EAAQ;EAE/B,shDAsBkGA,EAAE,CAAC,cAAD,CAtBpG;EAoFH,CAtFM;;ECEA,IAAIC,IAAI,GAAG;EAEdC,EAAAA,KAAK,EAAE;EACHC,IAAAA,MAAM,EAAE;EADL,GAFO;EAKdC,EAAAA,IAAI,EAAE,cAACD,MAAD,EAAY;EAEdF,IAAAA,IAAI,CAACC,KAAL,CAAWC,MAAX,GAAoBA,MAApB;EACH,GARa;EASdH,EAAAA,EAAE,EAAE,YAAC9C,IAAD,EAAU;EAEV,QAAG+C,IAAI,CAACC,KAAL,CAAWC,MAAX,CAAkBE,MAAlB,CAAyBnD,IAAzB,MAAmCoD,SAAtC,EAAiD,OAAOpD,IAAP;EAEjD,WAAO+C,IAAI,CAACC,KAAL,CAAWC,MAAX,CAAkBE,MAAlB,CAAyBnD,IAAzB,CAAP;EACH;EAda,CAAX;;ECKP,IAAM8C,EAAE,GAAGC,IAAI,CAACD,EAAhB;EAMA,IAAMO,KAAK,GAAG;EAEVL,EAAAA,KAAK,EAAE;EACHM,IAAAA,SAAS,EAAE,IADR;EAEHC,IAAAA,UAAU,EAAE,IAFT;EAGHC,IAAAA,YAAY,EAAE,KAHX;EAIHC,IAAAA,aAAa,EAAE,CAJZ;EAKHC,IAAAA,QAAQ,EAAE,EALP;EAMHC,IAAAA,MAAM,EAAE,EANL;EAOHC,IAAAA,cAAc,EAAE,IAPb;EAQHC,IAAAA,YAAY,EAAE,IARX;EASHC,IAAAA,QAAQ,EAAE,EATP;EAUHC,IAAAA,KAAK,EAAE,IAAIC,KAAJ,CAAU,uCAAV,CAVJ;EAWHC,IAAAA,KAAK,EAAE;EAXJ,GAFG;EAeVf,EAAAA,IAAI,EAAE,gBAAM;EAERG,IAAAA,KAAK,CAACa,OAAN;;EAEAb,IAAAA,KAAK,CAACL,KAAN,CAAYa,YAAZ,GAA2BM,WAAW,CAAC,YAAM;EAAEd,MAAAA,KAAK,CAACa,OAAN;EAAkB,KAA3B,EAA6B,IAA7B,CAAtC;EACH,GApBS;EAqBVA,EAAAA,OAAO,EAAE,mBAAM;EAGX,QAAIb,KAAK,CAACL,KAAN,CAAYM,SAAhB,EAA2BhB,UAAU;EAGrC,QAAI8B,CAAC,GAAGrF,QAAQ,CAACkB,aAAT,CAAuB,eAAvB,IAA0ClB,QAAQ,CAACkB,aAAT,CAAuB,eAAvB,EAAwCoE,KAAlF,GAA0F,EAAlG;EAGA,QAAIC,IAAI,GAAGvF,QAAQ,CAACkB,aAAT,CAAuB,eAAvB,IAA0ClB,QAAQ,CAACkB,aAAT,CAAuB,eAAvB,EAAwCsE,OAAxC,CAAgDF,KAA1F,GAAiG,EAA5G;EAGAG,IAAAA,KAAK,CAAC,8BAAD,EAAiC;EAClCC,MAAAA,MAAM,EAAE,MAD0B;EAElCC,MAAAA,OAAO,EAAE;EACL,kBAAU,kBADL;EAEL,wBAAgB,YAFX;EAGL,yBAAiB,YAAYhG,SAAS,CAAC,gBAAD,CAHjC;EAIL,wBAAgBA,SAAS,CAAC,cAAD,CAJpB;EAKL,sBAAcX,SAAS;EALlB,OAFyB;EASlC4G,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;EACjBC,QAAAA,KAAK,EAAE;EACHC,UAAAA,IAAI,EAAE;EACFC,YAAAA,IAAI,EAAQ,cADV;EAEFC,YAAAA,MAAM,EAAM,CAAC,QAAD,CAFV;EAGFC,YAAAA,KAAK,EAAOxG,SAAS,CAAC,cAAD;EAHnB,WADH;EAMHuE,UAAAA,MAAM,EAAE;EACJ+B,YAAAA,IAAI,EAAQ,QADR;EAEJhH,YAAAA,EAAE,EAAUU,SAAS,CAAC,MAAD;EAFjB,WANL;EAUHiF,UAAAA,MAAM,EAAE;EACJqB,YAAAA,IAAI,EAAQ,MADR;EAEJG,YAAAA,GAAG,EAAS,iBAFR;EAGJF,YAAAA,MAAM,EAAM,GAHR;EAIJX,YAAAA,IAAI,EAAQA,IAAI,IAAI,EAAR,GAAa,cAAcA,IAAd,GAAoB,IAAjC,GAAwC,EAJhD;EAKJL,YAAAA,KAAK,EAAOZ,KAAK,CAACL,KAAN,CAAYiB,KALpB;EAMJvG,YAAAA,MAAM,EAAM;EACR0H,cAAAA,KAAK,EAAE,MADC;EAERhB,cAAAA,CAAC,EAAEA;EAFK,aANR;EAUJiB,YAAAA,MAAM,EAAM;EACRD,cAAAA,KAAK,EAAE,SADC;EAERE,cAAAA,KAAK,EAAE;EAFC;EAVR;EAVL;EADU,OAAf;EAT4B,KAAjC,CAAL,CAsCCC,IAtCD,CAsCM,UAAAC,QAAQ;EAAA,aAAIA,QAAQ,CAACC,IAAT,EAAJ;EAAA,KAtCd,EAuCCF,IAvCD,CAuCM,UAAAC,QAAQ,EAAI;EAGd/C,MAAAA,UAAU;;EAEV,UAAG+C,QAAQ,CAACE,OAAZ,EAAoB;EAGhB3C,QAAAA,IAAI,CAACG,IAAL,CAAUsC,QAAQ,CAACvC,MAAnB;;EAGAI,QAAAA,KAAK,CAACsC,iBAAN;;EAGAtC,QAAAA,KAAK,CAACuC,UAAN,CAAiBJ,QAAjB;;EAGAnC,QAAAA,KAAK,CAACwC,UAAN,CAAiBL,QAAjB;;EAGAnC,QAAAA,KAAK,CAACyC,aAAN;;EAGAzC,QAAAA,KAAK,CAACX,UAAN;;EAGAW,QAAAA,KAAK,CAACL,KAAN,CAAYM,SAAZ,GAAwB,KAAxB;EAEH,OAvBD,MAuBK;EAED9D,QAAAA,aAAa,CAACgG,QAAD,CAAb;EACH;EACJ,KAvED,WAwEO,UAAAO,KAAK,EAAI;EACZzE,MAAAA,OAAO,CAACyE,KAAR,CAAc,QAAd,EAAwBA,KAAxB;EACH,KA1ED;EA2EH,GA5GS;EA6GVF,EAAAA,UAAU,EAAE,oBAACL,QAAD,EAAc;EAEtB7E,IAAAA,OAAO,CAAC,WAAD,EAAc,UAACI,CAAD,EAAO;EAExBA,MAAAA,CAAC,CAACiF,cAAF;EACA,UAAI5I,IAAI,GAAG2B,QAAQ,CAACkB,aAAT,CAAuB,6BAAvB,EAAsDA,aAAtD,CAAoE,GAApE,CAAX;EACAE,MAAAA,aAAa,CAAC/C,IAAD,CAAb;EACH,KALM,CAAP;EAMH,GArHS;EAsHV6I,EAAAA,QAAQ,EAAE,kBAACT,QAAD,EAAc;EAEpB,QAAGA,QAAQ,CAACT,IAAZ,EAAiB;EAEb,UAAGS,QAAQ,CAACT,IAAT,CAAcW,OAAd,IAAyB,IAA5B,EAAiC;EAIpC;EACJ,GA/HS;EAgIVC,EAAAA,iBAAiB,EAAE,6BAAM;EAErB,QAAG,CAACtC,KAAK,CAACL,KAAN,CAAYM,SAAhB,EAA2B;EAG3BvE,IAAAA,QAAQ,CAACkB,aAAT,CAAuB,WAAvB,EAAoCC,SAApC,GAAgD2C,WAAW,CAACC,EAAD,CAA3D;EACH,GAtIS;EAuIV8C,EAAAA,UAAU,EAAE,oBAACJ,QAAD,EAAc;EAEtB,QAAGnC,KAAK,CAACL,KAAN,CAAYM,SAAf,EAAyB;EAGrBzD,MAAAA,eAAe,CACX,CACI;EAAEzC,QAAAA,IAAI,EAAEA,IAAI,CAAC,gCAAD,CAAZ;EAAgD4C,QAAAA,IAAI,EAAE8C,EAAE,CAAC,WAAD;EAAxD,OADJ,EAEI;EAAE1F,QAAAA,IAAI,EAAEA,IAAI,CAAC,GAAD,CAAZ;EAAmB4C,QAAAA,IAAI,EAAE8C,EAAE,CAAC,YAAD;EAA3B,OAFJ,EAGI;EAAE9C,QAAAA,IAAI,EAAE8C,EAAE,CAAC,QAAD;EAAV,OAHJ,CADW,CAAf;EASAO,MAAAA,KAAK,CAACL,KAAN,CAAYc,QAAZ,GAAuB;EACnB,eAAO;EACH9D,UAAAA,IAAI,EAAE8C,EAAE,CAAC,KAAD,CADL;EAEH,mBAAO;EAFJ,SADY;EAKnB,sBAAc;EACV9C,UAAAA,IAAI,EAAE8C,EAAE,CAAC,YAAD,CADE;EAEV,mBAAO;EAFG,SALK;EASnB,qBAAa;EACT9C,UAAAA,IAAI,EAAE8C,EAAE,CAAC,WAAD,CADC;EAET,mBAAO;EAFE,SATM;EAanB,oBAAY;EACR9C,UAAAA,IAAI,EAAE8C,EAAE,CAAC,UAAD,CADA;EAER,mBAAO;EAFC,SAbO;EAiBnB,kBAAU;EACN9C,UAAAA,IAAI,EAAE8C,EAAE,CAAC,QAAD,CADF;EAEN,mBAAO;EAFD;EAjBS,OAAvB;EAsBH;;EAGDO,IAAAA,KAAK,CAACL,KAAN,CAAYW,MAAZ,GAAqB6B,QAAQ,CAAC7B,MAA9B;;EAGA,QAAI6B,QAAQ,CAAC7B,MAAT,CAAgBvE,MAAhB,IAA0B,CAA9B,EAAiC;EAE7BL,MAAAA,QAAQ,CAACkB,aAAT,CAAuB,cAAvB,EAAuCC,SAAvC,mCAA2E4C,EAAE,CAAC,uBAAD,CAA7E;EACA;EACH;;EAGD,QAAIoD,YAAY,GAAG,EAAnB;EACA7C,IAAAA,KAAK,CAACL,KAAN,CAAYS,aAAZ,GAA4B,EAA5B;EAEA,QAAI0C,IAAI,GAAG,EAAX;EAAA,QAAeC,SAAS,GAAG,CAA3B;;EACA,SAAK,IAAIjH,CAAT,IAAcqG,QAAQ,CAAC7B,MAAvB,EAA+B;EAG3BuC,MAAAA,YAAY,CAACG,IAAb,CAAkBb,QAAQ,CAAC7B,MAAT,CAAgBxE,CAAhB,EAAmBmH,GAArC;EAEA,UAAG,OAAOd,QAAQ,CAAC7B,MAAT,CAAgBxE,CAAhB,EAAmBoH,MAA1B,KAAsC,WAAzC,EAAsDf,QAAQ,CAAC7B,MAAT,CAAgBxE,CAAhB,EAAmBoH,MAAnB,GAA4B,KAA5B;EAEtD,UAAGf,QAAQ,CAAC7B,MAAT,CAAgBxE,CAAhB,EAAmBoH,MAAnB,IAA6B,KAAhC,EAAuCH,SAAS;EAKhD,UAAII,MAAM,GAAKnD,KAAK,CAACL,KAAN,CAAYU,QAAZ,CAAqB+C,QAArB,CAA8BjB,QAAQ,CAAC7B,MAAT,CAAgBxE,CAAhB,EAAmBmH,GAAjD,KAAyDjD,KAAK,CAACL,KAAN,CAAYM,SAAtE,GAAiF,EAAjF,GAAoF,KAAlG;EACA6C,MAAAA,IAAI,wCACUK,MADV,6IAIQhB,QAAQ,CAAC7B,MAAT,CAAgBxE,CAAhB,EAAmBuH,IAJ3B,qDAI0ElB,QAAQ,CAAC7B,MAAT,CAAgBxE,CAAhB,EAAmBwH,IAJ7F,sIAQiCtD,KAAK,CAACuD,SAAN,CAAgBpB,QAAQ,CAAC7B,MAAT,CAAgBxE,CAAhB,EAAmBoH,MAAnC,CARjC,+GAWiCtI,WAAW,CAACuH,QAAQ,CAAC7B,MAAT,CAAgBxE,CAAhB,EAAmB0H,KAApB,CAX5C,0HAciC1F,gBAAgB,CAACqE,QAAQ,CAACsB,IAAT,CAAczF,IAAf,EAAqBmE,QAAQ,CAAC7B,MAAT,CAAgBxE,CAAhB,EAAmB4H,OAAxC,CAdjD,sHAiBwBvB,QAAQ,CAAC7B,MAAT,CAAgBxE,CAAhB,EAAmBmH,GAjB3C,6BAiBiEnH,CAjBjE,quBAqBwBqG,QAAQ,CAAC7B,MAAT,CAAgBxE,CAAhB,EAAmBmH,GArB3C,6BAqBiEnH,CArBjE,8tBAAJ;EA2BH;;EAEDkE,IAAAA,KAAK,CAACL,KAAN,CAAYQ,YAAZ,GAA2B4C,SAAS,GAAG,CAAZ,GAAgB,IAAhB,GAAuB,KAAlD;EAMA/C,IAAAA,KAAK,CAACL,KAAN,CAAYU,QAAZ,GAAuBwC,YAAvB;EAmCAnH,IAAAA,QAAQ,CAACkB,aAAT,CAAuB,cAAvB,EAAuCC,SAAvC,GAAmDiG,IAAnD;EACH,GAhRS;EAkRVS,EAAAA,SAAS,EAAE,mBAACL,MAAD,EAAY;EAEnB,wCAA6BlD,KAAK,CAACL,KAAN,CAAYc,QAAZ,CAAqByC,MAArB,UAA7B,gBAAsElD,KAAK,CAACL,KAAN,CAAYc,QAAZ,CAAqByC,MAArB,EAA6BvG,IAAnG;EACH,GArRS;EAuRVgH,EAAAA,SAAS,EAAE,qBAAM;EAQb1F,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;;EAGA8B,IAAAA,KAAK,CAACL,KAAN,CAAYe,KAAZ,CAAkBkD,IAAlB;EAEH,GApSS;EAqSVC,EAAAA,SAAS,EAAE,mBAACC,GAAD,EAAS,EArSV;EAgTVrB,EAAAA,aAAa,EAAE,yBAAM;EAGjBnF,IAAAA,OAAO,CAAC,aAAD,EAAgB0C,KAAK,CAAC+D,SAAN,CAAgBC,SAAhC,CAAP;EAGA1G,IAAAA,OAAO,CAAC,eAAD,EAAkB0C,KAAK,CAAC+D,SAAN,CAAgBE,WAAlC,CAAP;EAGA3G,IAAAA,OAAO,CAAC,gBAAD,EAAmB0C,KAAK,CAAC+D,SAAN,CAAgBG,YAAnC,CAAP;EAGA,QAAG,CAAClE,KAAK,CAACL,KAAN,CAAYM,SAAhB,EAA2B;EAG3B3C,IAAAA,OAAO,CAAC,qBAAD,EAAwB0C,KAAK,CAAC+D,SAAN,CAAgBI,eAAxC,CAAP;EAGAtG,IAAAA,OAAO,CAAC,eAAD,EAAkBmC,KAAK,CAAC+D,SAAN,CAAgBK,YAAlC,CAAP;EAIA1I,IAAAA,QAAQ,CAAC4F,IAAT,CAAc1D,gBAAd,CAA+B,YAA/B,EAA6C,YAAW;EAEpD,UAAGoC,KAAK,CAACL,KAAN,CAAYO,UAAf,EAA0B;EAEtBF,QAAAA,KAAK,CAACL,KAAN,CAAYe,KAAZ,CAAkBkD,IAAlB;;EACA5D,QAAAA,KAAK,CAACL,KAAN,CAAYe,KAAZ,CAAkB2D,KAAlB;;EACArE,QAAAA,KAAK,CAACL,KAAN,CAAYe,KAAZ,CAAkB4D,WAAlB,GAAgC,CAAhC;EACAtE,QAAAA,KAAK,CAACL,KAAN,CAAYO,UAAZ,GAAyB,KAAzB;EACH,OAND,MAMK;EAGD,YAAGF,KAAK,CAACL,KAAN,CAAYY,cAAf,EAA+BgE,aAAa,CAACvE,KAAK,CAACL,KAAN,CAAYY,cAAb,CAAb;EAC/BP,QAAAA,KAAK,CAACL,KAAN,CAAYY,cAAZ,GAA6BO,WAAW,CAAC,YAAM;EAAE,cAAGd,KAAK,CAACL,KAAN,CAAYQ,YAAf,EAA6BH,KAAK,CAAC2D,SAAN;EAAoB,SAA1D,EAA4D,IAA5D,CAAxC;EACH;EAEJ,KAfD,EAeG,KAfH;EAgBH,GAtVS;EAuVVI,EAAAA,SAAS,EAAE;EAEPG,IAAAA,YAAY,EAAE,sBAACxG,CAAD,EAAO;EAEjBA,MAAAA,CAAC,CAACiF,cAAF;EAEA1E,MAAAA,OAAO,CAACC,GAAR,CAAYR,CAAC,CAAC8G,aAAF,CAAgBtD,OAAhB,CAAwBY,GAApC;EAEA,UAAI2C,EAAE,GAAG/I,QAAQ,CAACkB,aAAT,CAAuB,eAAvB,CAAT;;EACA,UAAGc,CAAC,CAAC8G,aAAF,CAAgBtD,OAAhB,CAAwBY,GAAxB,IAA+B,EAAlC,EAAqC;EACjC2C,QAAAA,EAAE,CAAC5H,SAAH,GAAe4C,EAAE,CAAC,KAAD,CAAjB;EACAgF,QAAAA,EAAE,CAACvD,OAAH,CAAWF,KAAX,GAAmB,EAAnB;EACH,OAHD,MAGK;EACDyD,QAAAA,EAAE,CAAC5H,SAAH,GAAemD,KAAK,CAACL,KAAN,CAAYc,QAAZ,CAAqB/C,CAAC,CAAC8G,aAAF,CAAgBtD,OAAhB,CAAwBY,GAA7C,EAAkDnF,IAAjE;EACA8H,QAAAA,EAAE,CAACvD,OAAH,CAAWF,KAAX,GAAmBtD,CAAC,CAAC8G,aAAF,CAAgBtD,OAAhB,CAAwBY,GAA3C;EACH;;EAED,UAAIgB,IAAI,GAAG,EAAX;EAGA4B,MAAAA,MAAM,CAACC,IAAP,CAAY3E,KAAK,CAACL,KAAN,CAAYc,QAAxB,EAAkCmE,OAAlC,CAA0C,UAAC9C,GAAD,EAAS;EAC/CgB,QAAAA,IAAI,GAAG9C,KAAK,CAACL,KAAN,CAAYc,QAAZ,CAAqBqB,GAArB,WAAgCjG,KAAhC,CAAsC,GAAtC,CAAP;EACAiH,QAAAA,IAAI,CAAC8B,OAAL,CAAa,UAAC9C,GAAD,EAAS;EAClB2C,UAAAA,EAAE,CAACI,SAAH,CAAaC,MAAb,CAAoBhD,GAApB;EACH,SAFD;EAGH,OALD;;EAQA,UAAGpE,CAAC,CAAC8G,aAAF,CAAgBtD,OAAhB,CAAwBY,GAAxB,IAA6B,EAAhC,EAAmC;EAE/B2C,QAAAA,EAAE,CAACI,SAAH,CAAaE,GAAb,CAAiB,aAAjB;EACH,OAHD,MAGK;EACDjC,QAAAA,IAAI,GAAG9C,KAAK,CAACL,KAAN,CAAYc,QAAZ,CAAqB/C,CAAC,CAAC8G,aAAF,CAAgBtD,OAAhB,CAAwBY,GAA7C,WAAwDjG,KAAxD,CAA8D,GAA9D,CAAP;EACAiH,QAAAA,IAAI,CAAC8B,OAAL,CAAa,UAAC9C,GAAD,EAAS;EAClB2C,UAAAA,EAAE,CAACI,SAAH,CAAaE,GAAb,CAAiBjD,GAAjB;EACH,SAFD;EAGH;;EAGD9B,MAAAA,KAAK,CAACa,OAAN;EACH,KAxCM;EA0CPmD,IAAAA,SAAS,EAAE,mBAACtG,CAAD,EAAO;EAAA;;EAEd,UAAIsH,KAAK,GAAGtJ,QAAQ,CAACkB,aAAT,CAAuB,cAAvB,CAAZ;EACA,UAAIqI,SAAS,GAAG,IAAIC,SAAS,CAACC,KAAd,CAAoBH,KAApB,CAAhB;EACA,UAAIlJ,CAAC,GAAG4B,CAAC,CAAC8G,aAAF,CAAgBtD,OAAhB,CAAwBkE,KAAhC;EACA,UAAIC,KAAK,GAAG,EAAZ;EAEAX,MAAAA,MAAM,CAACC,IAAP,CAAY3E,KAAK,CAACL,KAAN,CAAYc,QAAxB,EAAkCmE,OAAlC,CAA0C,UAAC9C,GAAD,EAAMsD,KAAN,EAAgB;EAEtDnH,QAAAA,OAAO,CAACC,GAAR,CAAY4D,GAAZ;EACAuD,QAAAA,KAAK,6DAAoDvD,GAApD,2BAAuE9B,KAAK,CAACL,KAAN,CAAYc,QAAZ,CAAqBqB,GAArB,EAA0BnF,IAAjG,cAAL;EACH,OAJD;EAOA,UAAI2I,YAAY,sHAEYtF,KAAK,CAACL,KAAN,CAAYc,QAAZ,CAAqBT,KAAK,CAACL,KAAN,CAAYW,MAAZ,CAAmBxE,CAAnB,EAAsB,QAAtB,CAArB,UAFZ,mOAGLkE,KAAK,CAACL,KAAN,CAAYc,QAAZ,CAAqBT,KAAK,CAACL,KAAN,CAAYW,MAAZ,CAAmBxE,CAAnB,EAAsB,QAAtB,CAArB,EAAsDa,IAHjD,8IAML0I,KANK,gDAAhB;EAWAL,MAAAA,KAAK,CAACpI,aAAN,CAAoB,eAApB,EAAqCiI,SAArC,CAA+CE,GAA/C,CAAmD,mBAAnD;EACAC,MAAAA,KAAK,CAACpI,aAAN,CAAoB,4BAApB,EAAkDC,SAAlD,GAA8DyI,YAAY,GAAGtF,KAAK,CAACL,KAAN,CAAYW,MAAZ,CAAmBxE,CAAnB,EAAsB,MAAtB,CAA7E;EACAkJ,MAAAA,KAAK,CAACpI,aAAN,CAAoB,4BAApB,EAAkDC,SAAlD,GAA8D4C,EAAE,CAAC,QAAD,CAAhE;EAEAuF,MAAAA,KAAK,CAACpI,aAAN,CAAoB,8BAApB,EAAoDC,SAApD,GAAgE4C,EAAE,CAAC,OAAD,CAAlE;EAEA,UAAIhD,IAAI,KAAR;EAEAwB,MAAAA,OAAO,CAACC,GAAR,CAAYpC,CAAZ;EACAmC,MAAAA,OAAO,CAACC,GAAR,CAAY8B,KAAK,CAACL,KAAN,CAAYW,MAAZ,CAAmBxE,CAAnB,EAAsBmH,GAAlC;EAEA,UAAIrB,MAAM;EAAIqB,QAAAA,GAAG,EAAE;EAACsC,UAAAA,CAAC,EAAE;EAAJ,SAAT;EAAoBlC,QAAAA,IAAI,EAAE;EAACkC,UAAAA,CAAC,EAAE,MAAJ;EAAY7H,UAAAA,CAAC,EAAE,MAAf;EAAuB8H,UAAAA,QAAQ,EAAE;EAAjC,SAA1B;EAAkEH,QAAAA,KAAK,EAAE;EAACE,UAAAA,CAAC,EAAE,EAAJ;EAAQ7H,UAAAA,CAAC,EAAE;EAAX,SAAzE;EAA8F+H,QAAAA,KAAK,EAAE;EAACF,UAAAA,CAAC,EAAE,MAAJ;EAAY7H,UAAAA,CAAC,EAAE;EAAf,SAArG;EAA6HgI,QAAAA,KAAK,EAAE;EAACH,UAAAA,CAAC,EAAE,SAAJ;EAAe7H,UAAAA,CAAC,EAAE;EAAlB,SAApI;EAA+JiI,QAAAA,IAAI,EAAE;EAACJ,UAAAA,CAAC,EAAE,MAAJ;EAAY7H,UAAAA,CAAC,EAAE;EAAf,SAArK;EAAiMkI,QAAAA,MAAM,EAAE;EAACL,UAAAA,CAAC,EAAE,QAAJ;EAAc7H,UAAAA,CAAC,EAAE;EAAjB,SAAzM;EAAmOmI,QAAAA,KAAK,EAAE;EAACN,UAAAA,CAAC,EAAE,OAAJ;EAAa7H,UAAAA,CAAC,EAAE;EAAhB,SAA1O;EAAmQoI,QAAAA,QAAQ,EAAE;EAACP,UAAAA,CAAC,EAAE,SAAJ;EAAe7H,UAAAA,CAAC,EAAE;EAAlB,SAA7Q;EAAwSqI,QAAAA,KAAK,EAAE;EAACR,UAAAA,CAAC,EAAE,MAAJ;EAAY7H,UAAAA,CAAC,EAAE;EAAf,SAA/S;EAAuUsI,QAAAA,KAAK,EAAE;EAACT,UAAAA,CAAC,EAAE,WAAJ;EAAiB7H,UAAAA,CAAC,EAAE;EAApB,SAA9U;EAA+WuI,QAAAA,KAAK,EAAE;EAACV,UAAAA,CAAC,EAAE,WAAJ;EAAiB7H,UAAAA,CAAC,EAAE;EAApB,SAAtX;EAAuZwI,QAAAA,IAAI,EAAE;EAACX,UAAAA,CAAC,EAAE,MAAJ;EAAY7H,UAAAA,CAAC,EAAE;EAAf,SAA7Z;EAAqbiC,QAAAA,KAAK,EAAE;EAAC4F,UAAAA,CAAC,EAAE,OAAJ;EAAa7H,UAAAA,CAAC,EAAE;EAAhB,SAA5b;EAAqdyI,QAAAA,EAAE,EAAE;EAACZ,UAAAA,CAAC,EAAE,UAAJ;EAAgB7H,UAAAA,CAAC,EAAE;EAAnB,SAAzd;EAAqf0I,QAAAA,EAAE,EAAE;EAACb,UAAAA,CAAC,EAAE,WAAJ;EAAiB7H,UAAAA,CAAC,EAAE;EAApB,SAAzf;EAAshB2I,QAAAA,EAAE,EAAE;EAACd,UAAAA,CAAC,EAAE,MAAJ;EAAY7H,UAAAA,CAAC,EAAE;EAAf,SAA1hB;EAAkjB4I,QAAAA,EAAE,EAAE;EAACf,UAAAA,CAAC,EAAE,OAAJ;EAAa7H,UAAAA,CAAC,EAAE;EAAhB,SAAtjB;EAA+kB6I,QAAAA,EAAE,EAAE;EAAChB,UAAAA,CAAC,EAAE,UAAJ;EAAgB7H,UAAAA,CAAC,EAAE;EAAnB;EAAnlB,2CAAsnB;EAAC6H,QAAAA,CAAC,EAAE,OAAJ;EAAa7H,QAAAA,CAAC,EAAE;EAAhB,OAAtnB,mCAAopB;EAAC6H,QAAAA,CAAC,EAAE,KAAJ;EAAW7H,QAAAA,CAAC,EAAE;EAAd,OAAppB,kCAA+qB;EAAC6H,QAAAA,CAAC,EAAE,MAAJ;EAAY7H,QAAAA,CAAC,EAAE;EAAf,OAA/qB,kCAA2sB;EAAC6H,QAAAA,CAAC,EAAE,MAAJ;EAAY7H,QAAAA,CAAC,EAAE;EAAf,OAA3sB,kCAAuuB;EAAC6H,QAAAA,CAAC,EAAE,OAAJ;EAAa7H,QAAAA,CAAC,EAAE;EAAhB,OAAvuB,kCAAowB;EAAC6H,QAAAA,CAAC,EAAE,MAAJ;EAAY7H,QAAAA,CAAC,EAAE;EAAf,OAApwB,kCAAgyB;EAAC6H,QAAAA,CAAC,EAAE,WAAJ;EAAiB7H,QAAAA,CAAC,EAAE;EAApB,OAAhyB,kCAAi0B;EAAC6H,QAAAA,CAAC,EAAE,cAAJ;EAAoB7H,QAAAA,CAAC,EAAE;EAAvB,OAAj0B,oCAAu2B;EAAC6H,QAAAA,CAAC,EAAE,MAAJ;EAAY7H,QAAAA,CAAC,EAAE;EAAf,OAAv2B,qCAA04B;EAAC6H,QAAAA,CAAC,EAAE,OAAJ;EAAa7H,QAAAA,CAAC,EAAE;EAAhB,OAA14B,kCAAu6B;EAAC6H,QAAAA,CAAC,EAAE,QAAJ;EAAc7H,QAAAA,CAAC,EAAE;EAAjB,OAAv6B,uCAA08B;EAAC6H,QAAAA,CAAC,EAAE,SAAJ;EAAe7H,QAAAA,CAAC,EAAE;EAAlB,OAA18B,mCAA0+B;EAAC6H,QAAAA,CAAC,EAAE,QAAJ;EAAc7H,QAAAA,CAAC,EAAE;EAAjB,OAA1+B,qCAA2gC;EAAC6H,QAAAA,CAAC,EAAE,OAAJ;EAAa7H,QAAAA,CAAC,EAAE;EAAhB,OAA3gC,0CAAgjC;EAAC6H,QAAAA,CAAC,EAAE,YAAJ;EAAkB7H,QAAAA,CAAC,EAAE;EAArB,OAAhjC,WAAV;;EAGA,WAAI,IAAI8I,CAAR,IAAa5E,MAAb,EAAoB;EAEhB,YAAG5B,KAAK,CAACL,KAAN,CAAYW,MAAZ,CAAmBxE,CAAnB,EAAsB0K,CAAtB,MAA6BzG,SAAhC,EAA2C;EAE3C,YAAI0G,GAAG,GAAGzG,KAAK,CAACL,KAAN,CAAYW,MAAZ,CAAmBxE,CAAnB,EAAsB0K,CAAtB,CAAV;EACA,YAAIzE,KAAK,GAAGH,MAAM,CAAC4E,CAAD,CAAN,CAAUjB,CAAtB;;EAEA,YAAIiB,CAAC,IAAE,OAAP,EAAe;EAAEC,UAAAA,GAAG,GAAG7L,WAAW,CAAC6L,GAAD,CAAjB;EAAyB;;EAE1ChK,QAAAA,IAAI,IAAI;AACxB;AACA,wBAFwB,GAECsF,KAFD,GAEO,YAFP,GAEoB/B,KAAK,CAAC0G,WAAN,CAAkB9E,MAAM,CAAC4E,CAAD,CAAxB,EAA6BC,GAA7B,EAAkCD,CAAlC,CAFpB,GAEyD;AACjF,uBAHgB;EAKH;;EAiBD/J,MAAAA,IAAI,IAAI,EAAR;EACAuI,MAAAA,KAAK,CAACpI,aAAN,CAAoB,aAApB,EAAmCC,SAAnC,GAA+CJ,IAA/C;EACAwI,MAAAA,SAAS,CAAC0B,IAAV;;EAEA3G,MAAAA,KAAK,CAAC+D,SAAN,CAAgB6C,mBAAhB,GAAsC,UAAClJ,CAAD,EAAO;EAEzCA,QAAAA,CAAC,CAACiF,cAAF;;EAEA3C,QAAAA,KAAK,CAAC6G,WAAN,CAAkB7G,KAAK,CAACL,KAAN,CAAYW,MAAZ,CAAmBxE,CAAnB,EAAsBmH,GAAxC;;EAEAgC,QAAAA,SAAS,CAAC6B,IAAV;EAGH,OATD;;EAWAxJ,MAAAA,OAAO,CAAC,gBAAD,EAAmB,UAACI,CAAD,EAAO;EAE7BA,QAAAA,CAAC,CAACiF,cAAF;EAEA1E,QAAAA,OAAO,CAACC,GAAR,CAAYR,CAAC,CAAC8G,aAAF,CAAgBtD,OAAhB,CAAwBY,GAApC;EAEA,YAAIiF,GAAG,GAAGrL,QAAQ,CAACkB,aAAT,CAAuB,qBAAvB,CAAV;EACAmK,QAAAA,GAAG,CAAClK,SAAJ,GAAgBmD,KAAK,CAACL,KAAN,CAAYc,QAAZ,CAAqB/C,CAAC,CAAC8G,aAAF,CAAgBtD,OAAhB,CAAwBY,GAA7C,EAAkDnF,IAAlE;EACAoK,QAAAA,GAAG,CAAC7F,OAAJ,CAAYF,KAAZ,GAAoBtD,CAAC,CAAC8G,aAAF,CAAgBtD,OAAhB,CAAwBY,GAA5C;EACA,YAAIgB,IAAI,GAAG,EAAX;EAGA4B,QAAAA,MAAM,CAACC,IAAP,CAAY3E,KAAK,CAACL,KAAN,CAAYc,QAAxB,EAAkCmE,OAAlC,CAA0C,UAAC9C,GAAD,EAAS;EAC/CgB,UAAAA,IAAI,GAAG9C,KAAK,CAACL,KAAN,CAAYc,QAAZ,CAAqBqB,GAArB,WAAgCjG,KAAhC,CAAsC,GAAtC,CAAP;EACAiH,UAAAA,IAAI,CAAC8B,OAAL,CAAa,UAAC9C,GAAD,EAAS;EAClBiF,YAAAA,GAAG,CAAClC,SAAJ,CAAcC,MAAd,CAAqBhD,GAArB;EACH,WAFD;EAGH,SALD;EAQAgB,QAAAA,IAAI,GAAG9C,KAAK,CAACL,KAAN,CAAYc,QAAZ,CAAqB/C,CAAC,CAAC8G,aAAF,CAAgBtD,OAAhB,CAAwBY,GAA7C,WAAwDjG,KAAxD,CAA8D,GAA9D,CAAP;EACAiH,QAAAA,IAAI,CAAC8B,OAAL,CAAa,UAAC9C,GAAD,EAAS;EAElBiF,UAAAA,GAAG,CAAClC,SAAJ,CAAcE,GAAd,CAAkBjD,GAAlB;EACH,SAHD;EAOH,OA5BM,CAAP;EA6BH,KA5JM;EA6JPmC,IAAAA,WAAW,EAAE,qBAACvG,CAAD,EAAO;EAEhBA,MAAAA,CAAC,CAACiF,cAAF;EAEA,UAAI3G,CAAC,GAAGgL,OAAO,CAAEvH,EAAE,CAAC,+BAAD,CAAJ,CAAf;EAEA,UAAG,CAACzD,CAAJ,EAAO;EAGPmF,MAAAA,KAAK,CAAC,8BAAD,EAAiC;EAClCC,QAAAA,MAAM,EAAE,MAD0B;EAElCC,QAAAA,OAAO,EAAE;EACL,oBAAU,kBADL;EAEL,0BAAgB,YAFX;EAGL,2BAAiB,YAAYhG,SAAS,CAAC,gBAAD,CAHjC;EAIL,0BAAgBA,SAAS,CAAC,cAAD,CAJpB;EAKL,wBAAcX,SAAS;EALlB,SAFyB;EASlC4G,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;EACjBC,UAAAA,KAAK,EAAE;EACHwF,YAAAA,OAAO,EAAE;EACLtF,cAAAA,IAAI,EAAQ,QADP;EAELG,cAAAA,GAAG,EAAS,iBAFP;EAGLnH,cAAAA,EAAE,EAAU+C,CAAC,CAAC8G,aAAF,CAAgBtD,OAAhB,CAAwBvG,EAH/B;EAILL,cAAAA,GAAG,EAASI,SAAS;EAJhB;EADN;EADU,SAAf;EAT4B,OAAjC,CAAL,CAoBCwH,IApBD,CAoBM,UAAAC,QAAQ;EAAA,eAAIA,QAAQ,CAACC,IAAT,EAAJ;EAAA,OApBd,EAqBCF,IArBD,CAqBM,UAAAC,QAAQ,EAAI;EAEd,YAAIA,QAAQ,CAACE,OAAb,EAAqB;EAIjBrC,UAAAA,KAAK,CAACa,OAAN;EAEH,SAND,MAMK;EAED1E,UAAAA,aAAa,CAACgG,QAAD,CAAb;EACH;;EAEDlE,QAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBiE,QAAxB;EACH,OAnCD,WAoCO,UAAAO,KAAK,EAAI;EACZzE,QAAAA,OAAO,CAACyE,KAAR,CAAc,QAAd,EAAwBA,KAAxB;EACH,OAtCD;EAwCH,KA9MM;EAgNP0B,IAAAA,YAAY,EAAE,sBAAC1G,CAAD,EAAO;EAEjBA,MAAAA,CAAC,CAACiF,cAAF;;EAIA3C,MAAAA,KAAK,CAACa,OAAN;EAGH,KAzNM;EA2NPsD,IAAAA,eAAe,EAAE,yBAACzG,CAAD,EAAO;EAEpBO,MAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ;;EACA8B,MAAAA,KAAK,CAAC+D,SAAN,CAAgB6C,mBAAhB,CAAoClJ,CAApC;EACH,KA/NM;EAiOPkJ,IAAAA,mBAAmB,EAAE;EAjOd,GAvVD;EA0jBVF,EAAAA,WAAW,EAAE,qBAACrI,CAAD,EAAI6I,CAAJ,EAAOV,CAAP,EAAa;EAEtB,YAAOnI,CAAC,CAACX,CAAT;EAEI,WAAK,MAAL;EAAa,eAAOwJ,CAAP;;EACb,WAAK,UAAL;EAAiB,eAAO,iGAA+FV,CAA/F,GAAiG,WAAjG,GAA6GU,CAA7G,GAA+G,IAA/G,GAAoHA,CAApH,GAAsH,aAA7H;;EACjB,WAAK,OAAL;EAGI,YAAIzK,IAAI,GAAG,sGAAX;;EACA,aAAI,IAAI+J,EAAR,IAAaU,CAAb,EAAe;EAGf,cAAIC,IAAI,GAAG,EAAX;;EACA,eAAI,IAAIC,CAAR,IAAaF,CAAC,CAACV,EAAD,CAAD,CAAKa,UAAlB,EAA6B;EAGzB,gBAAIvE,IAAI,GAAG,EAAX;;EAAe,iBAAI,IAAIyC,CAAR,IAAa2B,CAAC,CAACV,EAAD,CAAD,CAAKa,UAAL,CAAgBD,CAAhB,EAAmBtE,IAAhC;EAAsCA,cAAAA,IAAI,IAAIoE,CAAC,CAACV,EAAD,CAAD,CAAKa,UAAL,CAAgBD,CAAhB,EAAmBtE,IAAnB,CAAwByC,CAAxB,EAA2B+B,KAA3B,GAAmC,GAA3C;EAAtC;;EACfH,YAAAA,IAAI,IAAI,aAAaD,CAAC,CAACV,EAAD,CAAD,CAAKa,UAAL,CAAgBD,CAAhB,EAAmBE,KAAhC,GAAwC,aAAxC,GAAwDxE,IAAxD,GAA+D,gBAAvE;EAGA,gBAAGoE,CAAC,CAACV,EAAD,CAAD,CAAKa,UAAL,CAAgBD,CAAhB,EAAmB9D,IAAnB,KAA4BvD,SAA5B,IAAyCmH,CAAC,CAACV,EAAD,CAAD,CAAKa,UAAL,CAAgBD,CAAhB,EAAmB9D,IAAnB,CAAwBvH,MAAxB,GAAiC,CAA7E,EAAgFoL,IAAI,IAAI,sBAAsBD,CAAC,CAACV,EAAD,CAAD,CAAKa,UAAL,CAAgBD,CAAhB,EAAmB9D,IAAzC,GAAgD,SAAxD;EACnF;;EAED7G,UAAAA,IAAI,IAAI,MAAR;EACAA,UAAAA,IAAI,IAAI,cAAcyK,CAAC,CAACV,EAAD,CAAD,CAAKc,KAAnB,GAA2B,aAA3B,GAA2CJ,CAAC,CAACV,EAAD,CAAD,CAAKlD,IAAhD,GAAuD,yCAAvD,GAAmG6D,IAAnG,GAA0G,mCAA1G,GAAgJD,CAAC,CAACV,EAAD,CAAD,CAAKe,GAArJ,GAA2J,mCAA3J,GAAiM3M,WAAW,CAACsM,CAAC,CAACV,EAAD,CAAD,CAAKgB,MAAN,CAA5M,GAA4N,cAApO;EACA/K,UAAAA,IAAI,IAAI,OAAR;EACC;;EAEDA,QAAAA,IAAI,IAAI,UAAR;EAEJ,eAAOA,IAAP;;EACA;EAAS,eAAOyK,CAAP;EA9Bb;EAgCH,GA5lBS;EA6lBVL,EAAAA,WAAW,EAAE,qBAAClM,EAAD,EAAQ;EAEjB,QAAIyB,IAAI,GAAG,EAAX;;EAFiB,+CAKJV,QAAQ,CAAC+B,gBAAT,CAA0B,aAA1B,CALI;EAAA;;EAAA;EAKjB,0DAAsD;EAAA,YAA9CsD,CAA8C;;EAElD,gBAAOA,CAAC,CAACG,OAAF,CAAUS,IAAjB;EAEI,eAAK,KAAL;EAAYvF,YAAAA,IAAI,CAAC2E,CAAC,CAACG,OAAF,CAAUvG,EAAX,CAAJ,GAAqBoG,CAAC,CAACG,OAAF,CAAUF,KAA/B;EAAsC;;EAClD,eAAK,MAAL;EACA,eAAK,OAAL;EACA,eAAK,QAAL;EACA,eAAK,QAAL;EACA,eAAK,UAAL;EAAiB5E,YAAAA,IAAI,CAAC2E,CAAC,CAACpG,EAAH,CAAJ,GAAaoG,CAAC,CAACC,KAAf;EAAsB;;EACvC,eAAK,OAAL;EAAc5E,YAAAA,IAAI,CAAC2E,CAAC,CAACpG,EAAH,CAAJ,GAAaoG,CAAC,CAAC0G,aAAF,CAAgBA,aAAhB,CAA8BA,aAA9B,CAA4CA,aAA5C,CAA0DA,aAA1D,CAAwE7K,aAAxE,CAAsF,eAAtF,EAAuGoE,KAApH;EAA2H;EAR7I;EAUH;EAjBgB;EAAA;EAAA;EAAA;EAAA;;EAoBjBG,IAAAA,KAAK,CAAC,8BAAD,EAAiC;EAClCC,MAAAA,MAAM,EAAE,MAD0B;EAElCC,MAAAA,OAAO,EAAE;EACL,kBAAU,kBADL;EAEL,wBAAgB,YAFX;EAGL,yBAAiB,YAAYhG,SAAS,CAAC,gBAAD,CAHjC;EAIL,wBAAgBA,SAAS,CAAC,cAAD,CAJpB;EAKL,sBAAcX,SAAS;EALlB,OAFyB;EASlC4G,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;EACjBC,QAAAA,KAAK,EAAE;EACHiG,UAAAA,QAAQ,EAAE;EACN/F,YAAAA,IAAI,EAAQ,QADN;EAENG,YAAAA,GAAG,EAAS,iBAFN;EAGNxH,YAAAA,GAAG,EAASI,SAAS,EAHf;EAINC,YAAAA,EAAE,EAAUA,EAJN;EAKNyB,YAAAA,IAAI,EAAQA;EALN;EADP;EADU,OAAf;EAT4B,KAAjC,CAAL,CAqBC8F,IArBD,CAqBM,UAAAC,QAAQ;EAAA,aAAIA,QAAQ,CAACC,IAAT,EAAJ;EAAA,KArBd,EAsBCF,IAtBD,CAsBM,UAAAC,QAAQ,EAAI;EAEd,UAAIA,QAAQ,CAACE,OAAb,EAAqB;EAEjB,YAAIsF,KAAK,GAAG,IAAIzC,SAAS,CAAC0C,KAAd,CAAoBlM,QAAQ,CAACkB,aAAT,CAAuB,QAAvB,CAApB,CAAZ;EACAlB,QAAAA,QAAQ,CAACkB,aAAT,CAAuB,oBAAvB,EAA6CC,SAA7C,GAAyD4C,EAAE,CAAC,eAAD,CAA3D;EACAkI,QAAAA,KAAK,CAAChB,IAAN;;EAEA3G,QAAAA,KAAK,CAACa,OAAN;EAEH,OARD,MAQK;EAED1E,QAAAA,aAAa,CAACgG,QAAD,CAAb;EACH;;EAEDlE,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBiE,QAAxB;EACH,KAtCD,WAuCO,UAAAO,KAAK,EAAI;EACZzE,MAAAA,OAAO,CAACyE,KAAR,CAAc,QAAd,EAAwBA,KAAxB;EACH,KAzCD;EA2CAzE,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;EACH,GA7pBS;EA8pBVmB,EAAAA,UAAU,EAAE,wBAAM;EAEdA,IAAAA,UAAU,CAACI,EAAE,CAAC,iBAAe,IAAInB,IAAJ,GAAWG,WAAX,EAAf,GAAwC,oGAAzC,CAAH,EAAmJgB,EAAE,CAAC,mCAAD,CAArJ,CAAV;EACH;EAjqBS,CAAd;;EAoqBAO,KAAK,CAACH,IAAN;;;;;;"}